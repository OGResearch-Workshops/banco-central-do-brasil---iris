% [IrisToolbox] autogenerated preparsed model source code 09-May-2022 08:14:16
%
% * model-source/demography.md
% * model-source/households.md
% * model-source/production.md
% * model-source/monetary.md
% * model-source/fiscal.md
% * model-source/open.md
% * model-source/demography.md
% * model-source/households.md
% * model-source/production.md
% * model-source/monetary.md
% * model-source/fiscal.md
% * model-source/open.md
% * model-source/demography.md
% * model-source/households.md
% * model-source/production.md
% * model-source/monetary.md
% * model-source/fiscal.md
% * model-source/open.md
% * model-source/demography.md
% * model-source/households.md
% * model-source/production.md
% * model-source/monetary.md
% * model-source/fiscal.md
% * model-source/open.md
% * model-source/globals.md
% * model-source/wrapper-multiarea.md
% * model-source/commodity.md
% * model-source/trade.md
% * model-source/finance.md


!variables

    "Total population" aa_nn
    "Total population, Rate of change" aa_roc_nn
    "Total population relative to global population component" aa_nr
    "Working age population" aa_nw
    "Labor force" aa_nf


!log-variables !all-but


!parameters

    "S/S Population, Relative to Global Population Component" aa_ss_nr
    "S/S Share of Working Age Population in Total Population" aa_ss_nw_to_nn
    "S/S Labor Participation Rate" aa_ss_nf_to_nw

    "A/R Total Population Relative to Global Population Component" aa_rho_nr
    "A/R Share of Working Age Population in Total Population" aa_rho_nw
    "A/R Labor Participation Rate" aa_rho_nf


!shocks

    "Shock to relative population component" aa_shk_nr
    "Shock to share of working age population" aa_shk_nw_to_nn
    "Shock to labor participation rate" aa_shk_nf_to_nw


!equations

    "Total population relative to global population component"
    log(aa_nr) = aa_rho_nr * log(aa_nr{-1}) + (1-aa_rho_nr) * log(aa_ss_nr) + aa_shk_nr !! aa_nr = aa_ss_nr;


    "Total population"
    aa_nn = aa_nr * gg_nt;


    "Total population, Rate of change"
    aa_roc_nn = aa_nn / aa_nn{-1} !! aa_roc_nn = gg_ss_roc_nt;


    "Share of working age population"
    aa_nw/aa_nn = + aa_rho_nw * aa_nw{-1}/aa_nn{-1} + (1-aa_rho_nw) * aa_ss_nw_to_nn + aa_shk_nw_to_nn !! aa_nw = aa_ss_nw_to_nn * aa_nn;


    "Labor participation rate"
    aa_nf/aa_nw = + aa_rho_nf * aa_nf{-1}/aa_nw{-1} + (1-aa_rho_nf) * aa_ss_nf_to_nw + aa_shk_nf_to_nw !! aa_nf = aa_ss_nf_to_nw * aa_nw;


!variables(:aa_households)

    "Private consumption" aa_ch
    "Per-capita private consumption" aa_ch_to_nn
    "Relative point of reference for private consumption" aa_ref_ch_to_ch
    "Real discount factor" aa_rdf
    "Per-worker labor supply" aa_nh
    "Private investment" aa_ih
    "Uncertainty discount factor on capital" aa_zk
    "Uncertainty discount factor on production cash flows" aa_zy
    "Ex-post return on capital" aa_rk
    "Production capital" aa_k
    "Production capital services" aa_uk
    "Portfolio of claims on production capital" aa_kk
    "Household net worth" aa_netw
    "Nominal wage rate" aa_w

    "Price of production capital" aa_pk
    "Price of production capital services" aa_pu
    "Real consumer wage rate" aa_w_to_pc
    "Nominal wage rate absent labor market rigidities" aa_ww

    "Nominal wage rate, Rate of change" aa_roc_w
    "Household investment, Rate of change" aa_roc_ih
    "Production capital, Rate of change" aa_roc_k


!log-variables !all-but

    aa_ref_ch_to_ch


!parameters(:aa_households :aa_steady)

    "S/S Uncertainty discount factor on capital" aa_ss_zk
    "S/S Uncertainty discount factor on production cash flows" aa_ss_zy
    "Household discount factor" aa_beta
    "Depreciation of production capital" aa_delta
    "Inverse elasticity of labor supply" aa_eta
    "Utility location parameter of labor supply" aa_eta0
    "Intercept in current wealth utility" aa_nu_0
    "Slope of current wealth utility" aa_nu_1
    "Level parameter in cost of utilization of production capital" aa_upsilon_0
    "Inverse elasticity of cost of utilization of production capital" aa_upsilon_1


!parameters(:aa_households :aa_transitory)

    "A/R in real wage rate" aa_rho_w
    "A/R in uncertainty discount factor on capital" aa_rho_zk
    "A/R in uncertainty discount factor on production cash flows" aa_rho_zy
    "Point of reference in consuptions switch" aa_chi
    "Past consumption in reference consumption parameter" aa_chi_ch
    "Current income in reference consumption parameter" aa_chi_curr
    "Type 1 investment adjustment cost parameter" aa_xi_ih1
    "Type 2 investment adjustment cost parameter" aa_xi_ih2
    "Pressure relief valve for interest rate lower bound" aa_theta_3


!shocks(:aa_households)

    "Shock to private consumption" aa_shk_ch
    "Shock to wage rate" aa_shk_w
    "Shock to current income" aa_shk_curr
    "Shock to uncertainty discount factor on capital" aa_shk_zk
    "Shock to uncertainty discount factor on production cash flows" aa_shk_zy


!equations(:aa_households)


    "Optimal choice of household consumption"
    aa_vh*aa_pc*(aa_ch - aa_chi*aa_ref_ch_to_ch*aa_ch)*exp(-aa_shk_ch) = aa_nn*(1 - aa_chi*&aa_ref_ch_to_ch) !! aa_vh*aa_pc*aa_ch = aa_nn;

    "Point of reference in household consumption" 
    aa_ref_ch_to_ch = [ aa_chi_curr*((aa_w*aa_nh*aa_nf - aa_txls2_to_nc*aa_pc*aa_ch))/aa_pc + aa_chi_ch*aa_ch{-1}*gg_ss_roc_a ] / aa_ch;

    "Optimal choice of net position with local financial sector"
    aa_vh = aa_beta*aa_vh{+1}*aa_rh + aa_nn/(aa_pc*aa_ch)*[ aa_nu_1*(aa_pc*aa_ch/aa_netw - aa_nu_0) - gg_nu ] !! 1 = aa_beta*aa_rh/gg_ss_roc_a/aa_ss_roc_pc + aa_nu_1*aa_nch_to_netw_minus_nu_0 - gg_nu;

    "Auxiliary equation for steady-state calibration of nu_0"
    aa_nch_to_netw_minus_nu_0 = aa_pc * aa_ch / aa_netw - aa_nu_0;

    aa_rdf = aa_beta*aa_vh{+1}*aa_pc{+1}/(aa_vh*aa_pc);

    "Risk adjusted household rate"
    aa_rh = aa_r + aa_theta_3*(aa_unc_r - aa_r) + aa_zh;

    "Current net worth of households"
    aa_netw = aa_kk + aa_dg_to_ngdp*aa_ngdp + aa_nfa_to_ngdp*aa_ngdp;

    "Uncertainty discount factor on capital"
    log(aa_zk) = aa_rho_zk*log(aa_zk{-1}) + (1-aa_rho_zk)*log(aa_ss_zk) + aa_shk_zk !! aa_zk = aa_ss_zk;

    "Uncertainty discount factor on production cash flows"
    log(aa_zy) = aa_rho_zy*log(aa_zy{-1}) + (1-aa_rho_zy)*log(aa_ss_zy) + aa_shk_zy !! aa_zy = aa_ss_zy;


    "Optimal choice of per-worker hours worked"
    aa_vh * aa_ww = aa_eta0 * aa_nh^aa_eta;

    "Real consumer wage rate"
    aa_w_to_pc = aa_w / aa_pc;

    "Real wage rigidities"
    log(aa_w_to_pc) = + aa_rho_w * [log(aa_w_to_pc{-1}) + log(&aa_roc_w/&aa_roc_pc)] + (1-aa_rho_w) * log(aa_ww/aa_pc) + aa_shk_w !! aa_w = aa_ww;


    "Optimal choice of investment in local production capital"
    aa_pk = aa_pih*[ 1 + aa_xi_ih1*(log(aa_ih) - log((&aa_ih/&aa_k*&aa_roc_k)*aa_k{-1})) + aa_xi_ih2*(log(aa_ih/aa_ih{-1}/&aa_roc_ih) - aa_beta*log(aa_ih{+1}/aa_ih/&aa_roc_ih)) ] !! aa_pk = aa_pih;

    "Accumulation of production capital"
    aa_k = (1-aa_delta)*aa_k{-1} + aa_ih;

    "Definition of utilized production capital"
    aa_uk = aa_u * aa_k;

    "Optimal choice of utilization rate of production capital"
    aa_py * aa_upsilon_0 * aa_u^aa_upsilon_1 = aa_pu;

    "Auxiliary equation for steady-state calibration of upsilon_0"
    aa_upsilon_1_py_to_pu = aa_upsilon_0 * aa_py / aa_pu;

    "Ex-post return on capital"
    aa_rk*aa_pk{-1} = aa_u{-1}*aa_pu{-1}*aa_rh{-1} + (1-aa_delta)*aa_pk;


        aa_roc_w = aa_w / aa_w{-1};
    
        aa_roc_ih = aa_ih / aa_ih{-1};
    
        aa_roc_k = aa_k / aa_k{-1};


!variables(:aa_production)

    "Area specific productivity component" aa_ar
    "Shadow value of household budget constraing" aa_vh
    "Price of private consumption" aa_pc
    "Price of private investment" aa_pih
    "Domestic intermediate inputs" aa_yz
    "Stage T-3 output" aa_y3
    "Stage T-2 output" aa_y2
    "Stage T-1 output" aa_y1
    "Stage T-0 output" aa_y
    "Price of stage T-3 output" aa_py3
    "Price of state T-2 output" aa_py2
    "Price of state T-1 output" aa_py1
    "Price of stage T-0 output" aa_py0
    "Price of commodity input into production" aa_pq

    "Commodity input into production" aa_mq
    "Variable labor input into production" aa_nv

    "Nominal GDP" aa_ngdp
    "Real GDP index, Rate of change" aa_roc_gdp
    "Per-capita real GDP index, Rate of change" aa_roc_gdp_to_nn

    "Price of domestic production" aa_py
    "Nominal household rate, LCY" aa_rh

    "Price of final domestic output, Rate of change" aa_roc_py
    "Price of final domestic output, Rate of change, Point of reference" aa_ref_roc_py
    "Price of consumer goods, Rate of change" aa_roc_pc
    "Utilization rate of production capital" aa_u
    "Stage T-3 output, Rate of change" aa_roc_y3
    "Variable labor, Rate of change" aa_roc_nv

    "Auxiliary variable for steady-state calibration of upsilon_0" aa_upsilon_1_py_to_pu
    "Auxiliary equation for steady-state calibration of nu_0" aa_nch_to_netw_minus_nu_0


!log-variables !all-but

    aa_zh, aa_nch_to_netw_minus_nu_0


!parameters(:aa_production :aa_steady)

    "S/S Area specific productivity component" aa_ss_ar

    "Share of overhead labor" aa_gamma_n0
    "Share of intermediate imports in stage T-3 production" aa_gamma_m
    "Share of capital services in stage T-2 production" aa_gamma_uk
    "Share of commodity inputs in stage T-1 production" aa_gamma_q
    "Share of roundabout intermediates in stage T-0 production" aa_gamma_yz

    "Monopoly power (markup) of local producers" aa_mu_py
    "Markup to cover overhead labor" aa_mu_y3


!parameters(:aa_production :aa_transitory)

    "Autoregression in area specific productivity component" aa_rho_ar
    "Weight on S/S inflation in inflation indexation" aa_zeta_py
    "Stage T-2 input factor adjustment cost parameter" aa_xi_y2
    "Stage T-1 input factor adjustment cost parameter" aa_xi_y1
    "Price adjustment cost parameters" aa_xi_py


!shocks(:aa_production)

    "Shock to area specific productivity component" aa_shk_ar
    "Shock to final price setting" aa_shk_py


!equations(:aa_production)


    "Area-specific relative productivity component"
    log(aa_ar) = + aa_rho_ar * log(aa_ar{-1}) + (1 - aa_rho_ar) * log(aa_ss_ar) + aa_shk_ar !! aa_ar = aa_ss_ar;


    "Definition of variable labor input"
    aa_nv = (aa_nh - aa_gamma_n0*&aa_nh) * aa_nf;

    "Stage T-3 production function"
    aa_y3 = (aa_my/aa_gamma_m)^aa_gamma_m * ([aa_ar * gg_a * aa_nv]/(1-aa_gamma_m))^(1-aa_gamma_m);

    "Demand for intermediate imports"
    aa_gamma_m * aa_py3 * aa_y3 = (aa_pmm * gg_dmm) * aa_my * [1 + aa_xi_y3*((log(aa_my/aa_y3)-log(aa_my{-1}/aa_y3{-1}))-&aa_rdf*(log(aa_my{+1}/aa_y3{+1})-log(aa_my/aa_y3)))] !! aa_gamma_m * aa_py3 * aa_y3 = (aa_pmm * gg_dmm) * aa_my;

    "Demand for labor"
    (1-aa_gamma_m) * aa_py3 * aa_y3 = aa_mu_y3 * aa_w * aa_nv * [1 + aa_xi_y3*((log(aa_nv/aa_y3)-log(aa_nv{-1}/aa_y3{-1})-log(&aa_roc_nv/&aa_roc_y3))-&aa_rdf*(log(aa_nv{+1}/aa_y3{+1})-log(aa_nv/aa_y3)-log(&aa_roc_nv/&aa_roc_y3)))] !! (1-aa_gamma_m) * aa_py3 * aa_y3 = aa_mu_y3 * aa_w * aa_nv;


    aa_y2 = (aa_uk/aa_gamma_uk)^aa_gamma_uk * (aa_y3/(1-aa_gamma_uk))^(1-aa_gamma_uk);

    aa_gamma_uk * aa_py2 * aa_y2 = aa_pu * aa_uk * [1 + aa_xi_y2*((log(aa_uk/aa_y2)-log(aa_uk{-1}/aa_y2{-1}))-&aa_rdf*(log(aa_uk{+1}/aa_y2{+1})-log(aa_uk/aa_y2)))] !! aa_gamma_uk * aa_py2 * aa_y2 = aa_pu * aa_uk;

    (1-aa_gamma_uk) * aa_py2 * aa_y2 = aa_py3 * aa_y3 * [1 + aa_xi_y2*((log(aa_y3/aa_y2)-log(aa_y3{-1}/aa_y2{-1}))-&aa_rdf*(log(aa_y3{+1}/aa_y2{+1})-log(aa_y3/aa_y2)))] !! (1-aa_gamma_uk) * aa_py2 * aa_y2 = aa_py3 * aa_y3;


    aa_py1 = aa_py2^(1 - aa_gamma_q) * aa_pq^aa_gamma_q !! aa_y1 = (aa_y2/(1-aa_gamma_q))^(1-aa_gamma_q) * (aa_mq/aa_gamma_q)^aa_gamma_q;


    (1-aa_gamma_q) * &aa_py1 * aa_y1 = &aa_py2 * aa_y2 !! (1-aa_gamma_q) * aa_py1 * aa_y1 = aa_py2 * aa_y2;


    (aa_gamma_q) * &aa_py1 * aa_y1 = &aa_pq * aa_mq !! aa_gamma_q * aa_py1 * aa_y1 = aa_pq * aa_mq;


    aa_y = aa_y1;
    aa_py0 = aa_py1;
    aa_yz = 1;


    aa_mu_py*aa_py0*exp(aa_shk_py) = aa_py*[1 + (aa_mu_py-1)*aa_xi_py*(log(aa_roc_py/aa_ref_roc_py) - aa_beta*gg_zy*aa_zy*log(aa_roc_py{+1}/aa_ref_roc_py{+1}))] !! aa_py = aa_mu_py * aa_py0;

    aa_ref_roc_py = aa_roc_py{-1}^(1-aa_zeta_py) * &aa_roc_py^aa_zeta_py;

    aa_pc = aa_py;
    aa_pih = aa_py;


    aa_y = aa_ch + aa_cg + aa_ih + aa_yxx;


        aa_roc_cg = aa_cg / aa_cg{-1};
    
        aa_roc_pc = aa_pc / aa_pc{-1};
    
        aa_roc_py = aa_py / aa_py{-1};
    
        aa_roc_y3 = aa_y3 / aa_y3{-1};
    
        aa_roc_nv = aa_nv / aa_nv{-1};


    "Per-capita private consumption"
    aa_ch_to_nn = aa_ch / aa_nn;

    "Nominal GDP"
    aa_ngdp = aa_pc*aa_ch + aa_pih*aa_ih + aa_pc*aa_cg + aa_pxx*aa_xx - aa_pmm*aa_mm + aa_pq*(aa_xq - aa_mq);

    "Real GDP index, Rate of change"
    aa_roc_gdp = + (aa_pc*aa_ch/aa_ngdp + aa_pc{-1}*aa_ch{-1}/aa_ngdp{-1})/2 * ((aa_ch)/(aa_ch{-1})) + (aa_pih*aa_ih/aa_ngdp + aa_pih{-1}*aa_ih{-1}/aa_ngdp{-1})/2 * ((aa_ih)/(aa_ih{-1})) + (aa_pc*aa_cg/aa_ngdp + aa_pc{-1}*aa_cg{-1}/aa_ngdp{-1})/2 * ((aa_cg)/(aa_cg{-1})) + (aa_pxx*aa_xx/aa_ngdp + aa_pxx{-1}*aa_xx{-1}/aa_ngdp{-1})/2 * ((aa_xx)/(aa_xx{-1})) - (aa_pmm*aa_mm/aa_ngdp + aa_pmm{-1}*aa_mm{-1}/aa_ngdp{-1})/2 * ((aa_mm)/(aa_mm{-1})) + (aa_pq*aa_xq/aa_ngdp + aa_pq{-1}*aa_xq{-1}/aa_ngdp{-1})/2 * ((aa_xq)/(aa_xq{-1})) - (aa_pq*aa_mq/aa_ngdp + aa_pq{-1}*aa_mq{-1}/aa_ngdp{-1})/2 * ((aa_mq)/(aa_mq{-1})) !! aa_roc_gdp = gg_ss_roc_a * gg_ss_roc_nt;

    "Per-capita real GDP index, Rate of change"
    aa_roc_gdp_to_nn = aa_roc_gdp / aa_roc_nn;


!postprocessor(:aa_production)

    aa_nch_to_ngdp = aa_pc * aa_ch / aa_ngdp;
    aa_nih_to_ngdp = aa_pih * aa_ih / aa_ngdp;
    aa_nkh_to_ngdp = aa_pk * aa_k / aa_ngdp;
    aa_curr_to_ngdp = ((aa_w*aa_nh*aa_nf - aa_txls2_to_nc*aa_pc*aa_ch)) / aa_ngdp;
    aa_gdp = aa_gdp{-1} * aa_roc_gdp;


!log-variables !all-but

    aa_nch_to_ngdp
    aa_nih_to_ngdp
    aa_nkh_to_ngdp
    aa_curr_to_ngdp


!variables(:aa_monetary)

    "Nominal short-term rate, LCY" aa_r
    "Monetary policy reaction term" aa_react
    "Unconstrained nominal short-term rate, LCY" aa_unc_r


!parameters(:aa_monetary :aa_steady)

    "S/S Price of private consumption, Rate of change" aa_ss_roc_pc
    "Switch for lower bound on short-term rate" aa_floor


!parameters(:aa_monetary :aa_transitory)

    "A/R in policy rate" aa_rho_r 
    "Monetary policy reaction to CPI" aa_psi_pc 
    "Monetary policy reaction to nominal exchange rate" aa_psi_e
    "Monetary policy reaction to real economic activity" aa_psi_nh


!shocks(:aa_monetary)

    "Shock to monetary policy reaction function" aa_shk_r


!log-variables !all-but

    aa_react


!equations(:aa_monetary)

    "Monetary policy reaction function"
    log(aa_unc_r) = + aa_rho_r * log(aa_r{-1}) + (1 - aa_rho_r) * [ log(&aa_unc_r) + aa_react ] + aa_shk_r !! aa_pc = aa_pc{-1} * aa_ss_roc_pc;


    "Monetary policy reaction term"
    aa_react = + aa_psi_pc * (log(aa_roc_pc{+1}) - log(aa_ss_roc_pc)) + aa_psi_e * (log(aa_roc_e) - log(&aa_roc_e)) + aa_psi_nh * (log(aa_nh{+1}) - log(&aa_nh)) !! aa_react = 0;


    "Zero floor constraint on policy rate"
    aa_r = aa_floor*max(1, aa_unc_r) + (1-aa_floor)*aa_unc_r;


!variables

    "Government debt interest rate" aa_rg
    "Government consumption" aa_cg
    "Government debt to GDP ratio" aa_dg_to_ngdp
    "Net lump-sum tax on wealthy consumers to consumption ratio" aa_txls1_to_nc
    "Net lump-sum tax on poor consumers to consumption ratio" aa_txls2_to_nc
    "Government consumption, Rate of Change" aa_roc_cg
    "Import tariff rate" aa_trm


!log-variables !all-but

    aa_txls1_to_nc, aa_txls2_to_nc, aa_dg_to_ngdp, aa_trm


!parameters

    "S/S Government debt to GDP ratio" aa_ss_dg_to_ngdp
    "S/S Government consumption to GDP ratio" aa_ss_ncg_to_ngdp
    "S/S General import tariff rate" aa_ss_trm

    "Response in government consumption to government debt" aa_tau_cg
    "Response in type 1 lump-sum tax rate to government debt" aa_tau_txls1
    "Autoregression in government consumption" aa_rho_cg
    "Autoregression in type 1 lump-sum tax rate" aa_rho_txls2
    "Autoregression in type 2 lump-sum tax rate" aa_rho_txls1
    "Autoregression in generate import tariff rate" aa_rho_trm


!shocks

    "Shock to government consumption" aa_shk_cg
    "Shock to type 1 lump-sum taxes" aa_shk_txls1
    "Shock to type 2 lump-sum taxes" aa_shk_txls2
    "Shock to general import tariff rate" aa_shk_trm


!equations

    aa_rg = aa_r;

    
    "Dynamic fiscal budget constraint"
    aa_dg_to_ngdp*aa_ngdp = + aa_rg{-1}*aa_dg_to_ngdp{-1}*aa_ngdp{-1} + aa_pc*aa_cg - (aa_txls1_to_nc + aa_txls2_to_nc) * aa_pc*aa_ch - (aa_pmm - aa_fob_pmm) * aa_mm;


    "Fiscal reaction function for government consumption"
    log(aa_cg) = + aa_rho_cg * log(aa_cg{-1}*&aa_roc_cg) + (1 - aa_rho_cg) * log(aa_ss_ncg_to_ngdp*aa_ngdp/aa_pc) - aa_tau_cg * (aa_dg_to_ngdp{+1} - aa_ss_dg_to_ngdp) + aa_shk_cg !! aa_pc*aa_cg = aa_ss_ncg_to_ngdp*aa_ngdp;


    "Fiscal reaction function for type 1 net lump-sum taxes"
    aa_txls1_to_nc = + aa_rho_txls1 * aa_txls1_to_nc{-1} + (1-aa_rho_txls1) * &aa_txls1_to_nc + aa_tau_txls1 * (aa_dg_to_ngdp{+1} - aa_ss_dg_to_ngdp) + aa_shk_txls1 !! aa_dg_to_ngdp = aa_ss_dg_to_ngdp;


    "Fiscal reaction function for type 2 net lump-sum taxes"
    aa_txls2_to_nc = + aa_rho_txls2*aa_txls2_to_nc{-1} + aa_shk_txls2 !! aa_txls2_to_nc = 0;


    "Fiscal reaction function for import tariffs rate"
    aa_trm = + aa_rho_trm * aa_trm{-1} + (1 - aa_rho_trm) * aa_ss_trm + aa_shk_trm !! aa_trm = aa_ss_trm;


!variables(:aa_open)

    "Non-commodity imports" aa_mm
    "Price of non-commodity imports" aa_pmm
    "Price of non-commodity imports, Free on board at destinatin point" aa_fob_pmm
    "Import content of non-commodity exports" aa_mxx
    "Intermediate import inputs into domestic production" aa_my

    "Domestic content of non-commodity exports" aa_yxx
    "Non-commodity exports" aa_xx
    "Commodity exports" aa_xq
    "Price of non-commodity exports" aa_pxx

    "Net foreign assets to GDP Ratio" aa_nfa_to_ngdp
    "Effective interest rate and valuation on NFA" aa_rnfa
    "Checksum for net foreign assets to GDP ratio" aa_nfa_to_ngdp_checksum
    "Nominal exchange rate" aa_e
    "Expectations of nominal exchange rate" aa_exp_e
    "Nominal Exchange Rate, Rate of Change" aa_roc_e
    "BOP CA corporate equity primary income to GDP ratio" aa_bpceq_to_ngdp
    "BOP FA corporate equity transactions to GDP ratio" aa_bpfeq_to_ngdp
    "Price of non-commodity exports, Reference currency" aa_pxx_rcy
    "Value of non-commodity exports, Reference currency" aa_nxx_rcy
    "Net claims of financial sector on households" aa_bh_to_ngdp
    "Non-commodity imports to GDP ratio" aa_nmm_to_ngdp
    "Non-commodity exports to GDP ratio" aa_nxx_to_ngdp

    "Country credit risk" aa_zh
    "Autonomous component in country credit risk" aa_zh_aut


!log-variables !all-but

    aa_nfa_to_ngdp
    aa_nfa_to_ngdp_checksum
    aa_bpfeq_to_ngdp
    aa_bpceq_to_ngdp
    aa_bh_to_ngdp
    aa_nmm_to_ngdp
    aa_nxx_to_ngdp
    aa_zh_aut


!parameters(:aa_open :aa_steady)

    "Import intensity of non-commodity exports" aa_alpha
    "Acceleration in exportable productivity" aa_gamma_xx
    "Elasticity of household risk function wrt NFA" aa_theta_1
    "Curvature of household risk function wrt NFA" aa_theta_2
    "Share of local commodity production in world commodity production" aa_lambda
    "S/S Autonomous component in country credit risk" aa_ss_zh_aut


!parameters(:aa_open :aa_transition)

    "A/R Autonomous component in country credit risk" aa_rho_zh_aut
    "Weight on model-consistent expectations in exchange rate" aa_zeta_e
    "Adjustment cost parameter in stage t-3 production" aa_xi_y3


!shocks(:aa_open)

    "Interest parity shock" aa_shk_e
    "Shock to country credit risk" aa_shk_zh
    "Shock to autonoumous component in country credit risk" aa_shk_zh_aut


!equations(:aa_open)


    "Distribution of non-commodity imports"
    aa_mm = aa_my + aa_mxx;


    "Commodity endowment"
    aa_xq = aa_lambda * gg_q;

    "Commodity prices in local currency"
    aa_pq = gg_pq * aa_e;


    "Non-commodity export production function"
    aa_xx = aa_ar^aa_gamma_xx * (aa_yxx/(1-aa_alpha))^(1-aa_alpha) * (aa_mxx/aa_alpha)^aa_alpha;

    "Demand for local content in export production"
    (1-aa_alpha) * aa_pxx * aa_xx = aa_py * aa_yxx;

    "Demand for re-exports"
    aa_alpha * aa_pxx * aa_xx = (aa_pmm * gg_dmm) * aa_mxx;


    "Balance of payments transactions"
    aa_nfa_to_ngdp * aa_ngdp = + aa_rnfa * aa_nfa_to_ngdp{-1}*aa_ngdp{-1} + aa_bpfeq_to_ngdp * aa_ngdp + aa_bpceq_to_ngdp * aa_ngdp + aa_pxx * aa_xx - aa_fob_pmm * aa_mm + aa_pq * (aa_xq - aa_mq) + aa_nfa_to_ngdp_checksum * aa_ngdp;

    "Country credit risk"
    aa_zh = + aa_zh_aut + aa_theta_1 * (1/aa_theta_2)*[ exp(-aa_theta_2*aa_nfa_to_ngdp*aa_ngdp/(aa_pk*aa_k)) - 1 ] + aa_shk_zh;

    "Autonomous component in country credit risk"
    aa_zh_aut = + aa_rho_zh_aut * aa_zh_aut{-1} + (1 - aa_rho_zh_aut) * aa_ss_zh_aut + aa_shk_zh_aut !! aa_zh_aut = aa_ss_zh_aut;


    "Net balance sheet of local financial sector"
    aa_bh_to_ngdp + aa_dg_to_ngdp + aa_nfa_to_ngdp = 0;


    "Nominal Exchange Rate Expectations"
    aa_exp_e = aa_e{+1}^aa_zeta_e * (aa_e*&aa_roc_e)^(1-aa_zeta_e);


    aa_roc_e = aa_e / aa_e{-1};


    "Price of non-commodity exports in reference currency"
    aa_pxx_rcy = aa_pxx / aa_e;

    "Value of non-commodity exports in reference currency"
    aa_nxx_rcy = aa_pxx_rcy * aa_xx;


    "Total imports to GDP ratio"
    aa_nmm_to_ngdp = aa_fob_pmm*aa_mm / aa_ngdp;
    aa_nxx_to_ngdp = aa_pxx*aa_xx / aa_ngdp;


!postprocessor

    aa_nmxx_to_ngdp = aa_fob_pmm * aa_mxx / aa_ngdp;
    aa_netxq_to_ngdp = aa_pq*(aa_xq - aa_mq) / aa_ngdp;


!log-variables !all-but

    aa_nmm_to_ngdp
    aa_nxx_to_ngdp
    aa_nmxx_to_ngdp
    aa_netxq_to_ngdp


!variables

    "Total population" bb_nn
    "Total population, Rate of change" bb_roc_nn
    "Total population relative to global population component" bb_nr
    "Working age population" bb_nw
    "Labor force" bb_nf


!log-variables !all-but


!parameters

    "S/S Population, Relative to Global Population Component" bb_ss_nr
    "S/S Share of Working Age Population in Total Population" bb_ss_nw_to_nn
    "S/S Labor Participation Rate" bb_ss_nf_to_nw

    "A/R Total Population Relative to Global Population Component" bb_rho_nr
    "A/R Share of Working Age Population in Total Population" bb_rho_nw
    "A/R Labor Participation Rate" bb_rho_nf


!shocks

    "Shock to relative population component" bb_shk_nr
    "Shock to share of working age population" bb_shk_nw_to_nn
    "Shock to labor participation rate" bb_shk_nf_to_nw


!equations

    "Total population relative to global population component"
    log(bb_nr) = bb_rho_nr * log(bb_nr{-1}) + (1-bb_rho_nr) * log(bb_ss_nr) + bb_shk_nr !! bb_nr = bb_ss_nr;


    "Total population"
    bb_nn = bb_nr * gg_nt;


    "Total population, Rate of change"
    bb_roc_nn = bb_nn / bb_nn{-1} !! bb_roc_nn = gg_ss_roc_nt;


    "Share of working age population"
    bb_nw/bb_nn = + bb_rho_nw * bb_nw{-1}/bb_nn{-1} + (1-bb_rho_nw) * bb_ss_nw_to_nn + bb_shk_nw_to_nn !! bb_nw = bb_ss_nw_to_nn * bb_nn;


    "Labor participation rate"
    bb_nf/bb_nw = + bb_rho_nf * bb_nf{-1}/bb_nw{-1} + (1-bb_rho_nf) * bb_ss_nf_to_nw + bb_shk_nf_to_nw !! bb_nf = bb_ss_nf_to_nw * bb_nw;


!variables(:bb_households)

    "Private consumption" bb_ch
    "Per-capita private consumption" bb_ch_to_nn
    "Relative point of reference for private consumption" bb_ref_ch_to_ch
    "Real discount factor" bb_rdf
    "Per-worker labor supply" bb_nh
    "Private investment" bb_ih
    "Uncertainty discount factor on capital" bb_zk
    "Uncertainty discount factor on production cash flows" bb_zy
    "Ex-post return on capital" bb_rk
    "Production capital" bb_k
    "Production capital services" bb_uk
    "Portfolio of claims on production capital" bb_kk
    "Household net worth" bb_netw
    "Nominal wage rate" bb_w

    "Price of production capital" bb_pk
    "Price of production capital services" bb_pu
    "Real consumer wage rate" bb_w_to_pc
    "Nominal wage rate absent labor market rigidities" bb_ww

    "Nominal wage rate, Rate of change" bb_roc_w
    "Household investment, Rate of change" bb_roc_ih
    "Production capital, Rate of change" bb_roc_k


!log-variables !all-but

    bb_ref_ch_to_ch


!parameters(:bb_households :bb_steady)

    "S/S Uncertainty discount factor on capital" bb_ss_zk
    "S/S Uncertainty discount factor on production cash flows" bb_ss_zy
    "Household discount factor" bb_beta
    "Depreciation of production capital" bb_delta
    "Inverse elasticity of labor supply" bb_eta
    "Utility location parameter of labor supply" bb_eta0
    "Intercept in current wealth utility" bb_nu_0
    "Slope of current wealth utility" bb_nu_1
    "Level parameter in cost of utilization of production capital" bb_upsilon_0
    "Inverse elasticity of cost of utilization of production capital" bb_upsilon_1


!parameters(:bb_households :bb_transitory)

    "A/R in real wage rate" bb_rho_w
    "A/R in uncertainty discount factor on capital" bb_rho_zk
    "A/R in uncertainty discount factor on production cash flows" bb_rho_zy
    "Point of reference in consuptions switch" bb_chi
    "Past consumption in reference consumption parameter" bb_chi_ch
    "Current income in reference consumption parameter" bb_chi_curr
    "Type 1 investment adjustment cost parameter" bb_xi_ih1
    "Type 2 investment adjustment cost parameter" bb_xi_ih2
    "Pressure relief valve for interest rate lower bound" bb_theta_3


!shocks(:bb_households)

    "Shock to private consumption" bb_shk_ch
    "Shock to wage rate" bb_shk_w
    "Shock to current income" bb_shk_curr
    "Shock to uncertainty discount factor on capital" bb_shk_zk
    "Shock to uncertainty discount factor on production cash flows" bb_shk_zy


!equations(:bb_households)


    "Optimal choice of household consumption"
    bb_vh*bb_pc*(bb_ch - bb_chi*bb_ref_ch_to_ch*bb_ch)*exp(-bb_shk_ch) = bb_nn*(1 - bb_chi*&bb_ref_ch_to_ch) !! bb_vh*bb_pc*bb_ch = bb_nn;

    "Point of reference in household consumption" 
    bb_ref_ch_to_ch = [ bb_chi_curr*((bb_w*bb_nh*bb_nf - bb_txls2_to_nc*bb_pc*bb_ch))/bb_pc + bb_chi_ch*bb_ch{-1}*gg_ss_roc_a ] / bb_ch;

    "Optimal choice of net position with local financial sector"
    bb_vh = bb_beta*bb_vh{+1}*bb_rh + bb_nn/(bb_pc*bb_ch)*[ bb_nu_1*(bb_pc*bb_ch/bb_netw - bb_nu_0) - gg_nu ] !! 1 = bb_beta*bb_rh/gg_ss_roc_a/bb_ss_roc_pc + bb_nu_1*bb_nch_to_netw_minus_nu_0 - gg_nu;

    "Auxiliary equation for steady-state calibration of nu_0"
    bb_nch_to_netw_minus_nu_0 = bb_pc * bb_ch / bb_netw - bb_nu_0;

    bb_rdf = bb_beta*bb_vh{+1}*bb_pc{+1}/(bb_vh*bb_pc);

    "Risk adjusted household rate"
    bb_rh = bb_r + bb_theta_3*(bb_unc_r - bb_r) + bb_zh;

    "Current net worth of households"
    bb_netw = bb_kk + bb_dg_to_ngdp*bb_ngdp + bb_nfa_to_ngdp*bb_ngdp;

    "Uncertainty discount factor on capital"
    log(bb_zk) = bb_rho_zk*log(bb_zk{-1}) + (1-bb_rho_zk)*log(bb_ss_zk) + bb_shk_zk !! bb_zk = bb_ss_zk;

    "Uncertainty discount factor on production cash flows"
    log(bb_zy) = bb_rho_zy*log(bb_zy{-1}) + (1-bb_rho_zy)*log(bb_ss_zy) + bb_shk_zy !! bb_zy = bb_ss_zy;


    "Optimal choice of per-worker hours worked"
    bb_vh * bb_ww = bb_eta0 * bb_nh^bb_eta;

    "Real consumer wage rate"
    bb_w_to_pc = bb_w / bb_pc;

    "Real wage rigidities"
    log(bb_w_to_pc) = + bb_rho_w * [log(bb_w_to_pc{-1}) + log(&bb_roc_w/&bb_roc_pc)] + (1-bb_rho_w) * log(bb_ww/bb_pc) + bb_shk_w !! bb_w = bb_ww;


    "Optimal choice of investment in local production capital"
    bb_pk = bb_pih*[ 1 + bb_xi_ih1*(log(bb_ih) - log((&bb_ih/&bb_k*&bb_roc_k)*bb_k{-1})) + bb_xi_ih2*(log(bb_ih/bb_ih{-1}/&bb_roc_ih) - bb_beta*log(bb_ih{+1}/bb_ih/&bb_roc_ih)) ] !! bb_pk = bb_pih;

    "Accumulation of production capital"
    bb_k = (1-bb_delta)*bb_k{-1} + bb_ih;

    "Definition of utilized production capital"
    bb_uk = bb_u * bb_k;

    "Optimal choice of utilization rate of production capital"
    bb_py * bb_upsilon_0 * bb_u^bb_upsilon_1 = bb_pu;

    "Auxiliary equation for steady-state calibration of upsilon_0"
    bb_upsilon_1_py_to_pu = bb_upsilon_0 * bb_py / bb_pu;

    "Ex-post return on capital"
    bb_rk*bb_pk{-1} = bb_u{-1}*bb_pu{-1}*bb_rh{-1} + (1-bb_delta)*bb_pk;


        bb_roc_w = bb_w / bb_w{-1};
    
        bb_roc_ih = bb_ih / bb_ih{-1};
    
        bb_roc_k = bb_k / bb_k{-1};


!variables(:bb_production)

    "Area specific productivity component" bb_ar
    "Shadow value of household budget constraing" bb_vh
    "Price of private consumption" bb_pc
    "Price of private investment" bb_pih
    "Domestic intermediate inputs" bb_yz
    "Stage T-3 output" bb_y3
    "Stage T-2 output" bb_y2
    "Stage T-1 output" bb_y1
    "Stage T-0 output" bb_y
    "Price of stage T-3 output" bb_py3
    "Price of state T-2 output" bb_py2
    "Price of state T-1 output" bb_py1
    "Price of stage T-0 output" bb_py0
    "Price of commodity input into production" bb_pq

    "Commodity input into production" bb_mq
    "Variable labor input into production" bb_nv

    "Nominal GDP" bb_ngdp
    "Real GDP index, Rate of change" bb_roc_gdp
    "Per-capita real GDP index, Rate of change" bb_roc_gdp_to_nn

    "Price of domestic production" bb_py
    "Nominal household rate, LCY" bb_rh

    "Price of final domestic output, Rate of change" bb_roc_py
    "Price of final domestic output, Rate of change, Point of reference" bb_ref_roc_py
    "Price of consumer goods, Rate of change" bb_roc_pc
    "Utilization rate of production capital" bb_u
    "Stage T-3 output, Rate of change" bb_roc_y3
    "Variable labor, Rate of change" bb_roc_nv

    "Auxiliary variable for steady-state calibration of upsilon_0" bb_upsilon_1_py_to_pu
    "Auxiliary equation for steady-state calibration of nu_0" bb_nch_to_netw_minus_nu_0


!log-variables !all-but

    bb_zh, bb_nch_to_netw_minus_nu_0


!parameters(:bb_production :bb_steady)

    "S/S Area specific productivity component" bb_ss_ar

    "Share of overhead labor" bb_gamma_n0
    "Share of intermediate imports in stage T-3 production" bb_gamma_m
    "Share of capital services in stage T-2 production" bb_gamma_uk
    "Share of commodity inputs in stage T-1 production" bb_gamma_q
    "Share of roundabout intermediates in stage T-0 production" bb_gamma_yz

    "Monopoly power (markup) of local producers" bb_mu_py
    "Markup to cover overhead labor" bb_mu_y3


!parameters(:bb_production :bb_transitory)

    "Autoregression in area specific productivity component" bb_rho_ar
    "Weight on S/S inflation in inflation indexation" bb_zeta_py
    "Stage T-2 input factor adjustment cost parameter" bb_xi_y2
    "Stage T-1 input factor adjustment cost parameter" bb_xi_y1
    "Price adjustment cost parameters" bb_xi_py


!shocks(:bb_production)

    "Shock to area specific productivity component" bb_shk_ar
    "Shock to final price setting" bb_shk_py


!equations(:bb_production)


    "Area-specific relative productivity component"
    log(bb_ar) = + bb_rho_ar * log(bb_ar{-1}) + (1 - bb_rho_ar) * log(bb_ss_ar) + bb_shk_ar !! bb_ar = bb_ss_ar;


    "Definition of variable labor input"
    bb_nv = (bb_nh - bb_gamma_n0*&bb_nh) * bb_nf;

    "Stage T-3 production function"
    bb_y3 = (bb_my/bb_gamma_m)^bb_gamma_m * ([bb_ar * gg_a * bb_nv]/(1-bb_gamma_m))^(1-bb_gamma_m);

    "Demand for intermediate imports"
    bb_gamma_m * bb_py3 * bb_y3 = (bb_pmm * gg_dmm) * bb_my * [1 + bb_xi_y3*((log(bb_my/bb_y3)-log(bb_my{-1}/bb_y3{-1}))-&bb_rdf*(log(bb_my{+1}/bb_y3{+1})-log(bb_my/bb_y3)))] !! bb_gamma_m * bb_py3 * bb_y3 = (bb_pmm * gg_dmm) * bb_my;

    "Demand for labor"
    (1-bb_gamma_m) * bb_py3 * bb_y3 = bb_mu_y3 * bb_w * bb_nv * [1 + bb_xi_y3*((log(bb_nv/bb_y3)-log(bb_nv{-1}/bb_y3{-1})-log(&bb_roc_nv/&bb_roc_y3))-&bb_rdf*(log(bb_nv{+1}/bb_y3{+1})-log(bb_nv/bb_y3)-log(&bb_roc_nv/&bb_roc_y3)))] !! (1-bb_gamma_m) * bb_py3 * bb_y3 = bb_mu_y3 * bb_w * bb_nv;


    bb_y2 = (bb_uk/bb_gamma_uk)^bb_gamma_uk * (bb_y3/(1-bb_gamma_uk))^(1-bb_gamma_uk);

    bb_gamma_uk * bb_py2 * bb_y2 = bb_pu * bb_uk * [1 + bb_xi_y2*((log(bb_uk/bb_y2)-log(bb_uk{-1}/bb_y2{-1}))-&bb_rdf*(log(bb_uk{+1}/bb_y2{+1})-log(bb_uk/bb_y2)))] !! bb_gamma_uk * bb_py2 * bb_y2 = bb_pu * bb_uk;

    (1-bb_gamma_uk) * bb_py2 * bb_y2 = bb_py3 * bb_y3 * [1 + bb_xi_y2*((log(bb_y3/bb_y2)-log(bb_y3{-1}/bb_y2{-1}))-&bb_rdf*(log(bb_y3{+1}/bb_y2{+1})-log(bb_y3/bb_y2)))] !! (1-bb_gamma_uk) * bb_py2 * bb_y2 = bb_py3 * bb_y3;


    bb_py1 = bb_py2^(1 - bb_gamma_q) * bb_pq^bb_gamma_q !! bb_y1 = (bb_y2/(1-bb_gamma_q))^(1-bb_gamma_q) * (bb_mq/bb_gamma_q)^bb_gamma_q;


    (1-bb_gamma_q) * &bb_py1 * bb_y1 = &bb_py2 * bb_y2 !! (1-bb_gamma_q) * bb_py1 * bb_y1 = bb_py2 * bb_y2;


    (bb_gamma_q) * &bb_py1 * bb_y1 = &bb_pq * bb_mq !! bb_gamma_q * bb_py1 * bb_y1 = bb_pq * bb_mq;


    bb_y = bb_y1;
    bb_py0 = bb_py1;
    bb_yz = 1;


    bb_mu_py*bb_py0*exp(bb_shk_py) = bb_py*[1 + (bb_mu_py-1)*bb_xi_py*(log(bb_roc_py/bb_ref_roc_py) - bb_beta*gg_zy*bb_zy*log(bb_roc_py{+1}/bb_ref_roc_py{+1}))] !! bb_py = bb_mu_py * bb_py0;

    bb_ref_roc_py = bb_roc_py{-1}^(1-bb_zeta_py) * &bb_roc_py^bb_zeta_py;

    bb_pc = bb_py;
    bb_pih = bb_py;


    bb_y = bb_ch + bb_cg + bb_ih + bb_yxx;


        bb_roc_cg = bb_cg / bb_cg{-1};
    
        bb_roc_pc = bb_pc / bb_pc{-1};
    
        bb_roc_py = bb_py / bb_py{-1};
    
        bb_roc_y3 = bb_y3 / bb_y3{-1};
    
        bb_roc_nv = bb_nv / bb_nv{-1};


    "Per-capita private consumption"
    bb_ch_to_nn = bb_ch / bb_nn;

    "Nominal GDP"
    bb_ngdp = bb_pc*bb_ch + bb_pih*bb_ih + bb_pc*bb_cg + bb_pxx*bb_xx - bb_pmm*bb_mm + bb_pq*(bb_xq - bb_mq);

    "Real GDP index, Rate of change"
    bb_roc_gdp = + (bb_pc*bb_ch/bb_ngdp + bb_pc{-1}*bb_ch{-1}/bb_ngdp{-1})/2 * ((bb_ch)/(bb_ch{-1})) + (bb_pih*bb_ih/bb_ngdp + bb_pih{-1}*bb_ih{-1}/bb_ngdp{-1})/2 * ((bb_ih)/(bb_ih{-1})) + (bb_pc*bb_cg/bb_ngdp + bb_pc{-1}*bb_cg{-1}/bb_ngdp{-1})/2 * ((bb_cg)/(bb_cg{-1})) + (bb_pxx*bb_xx/bb_ngdp + bb_pxx{-1}*bb_xx{-1}/bb_ngdp{-1})/2 * ((bb_xx)/(bb_xx{-1})) - (bb_pmm*bb_mm/bb_ngdp + bb_pmm{-1}*bb_mm{-1}/bb_ngdp{-1})/2 * ((bb_mm)/(bb_mm{-1})) + (bb_pq*bb_xq/bb_ngdp + bb_pq{-1}*bb_xq{-1}/bb_ngdp{-1})/2 * ((bb_xq)/(bb_xq{-1})) - (bb_pq*bb_mq/bb_ngdp + bb_pq{-1}*bb_mq{-1}/bb_ngdp{-1})/2 * ((bb_mq)/(bb_mq{-1})) !! bb_roc_gdp = gg_ss_roc_a * gg_ss_roc_nt;

    "Per-capita real GDP index, Rate of change"
    bb_roc_gdp_to_nn = bb_roc_gdp / bb_roc_nn;


!postprocessor(:bb_production)

    bb_nch_to_ngdp = bb_pc * bb_ch / bb_ngdp;
    bb_nih_to_ngdp = bb_pih * bb_ih / bb_ngdp;
    bb_nkh_to_ngdp = bb_pk * bb_k / bb_ngdp;
    bb_curr_to_ngdp = ((bb_w*bb_nh*bb_nf - bb_txls2_to_nc*bb_pc*bb_ch)) / bb_ngdp;
    bb_gdp = bb_gdp{-1} * bb_roc_gdp;


!log-variables !all-but

    bb_nch_to_ngdp
    bb_nih_to_ngdp
    bb_nkh_to_ngdp
    bb_curr_to_ngdp


!variables(:bb_monetary)

    "Nominal short-term rate, LCY" bb_r
    "Monetary policy reaction term" bb_react
    "Unconstrained nominal short-term rate, LCY" bb_unc_r


!parameters(:bb_monetary :bb_steady)

    "S/S Price of private consumption, Rate of change" bb_ss_roc_pc
    "Switch for lower bound on short-term rate" bb_floor


!parameters(:bb_monetary :bb_transitory)

    "A/R in policy rate" bb_rho_r 
    "Monetary policy reaction to CPI" bb_psi_pc 
    "Monetary policy reaction to nominal exchange rate" bb_psi_e
    "Monetary policy reaction to real economic activity" bb_psi_nh


!shocks(:bb_monetary)

    "Shock to monetary policy reaction function" bb_shk_r


!log-variables !all-but

    bb_react


!equations(:bb_monetary)

    "Monetary policy reaction function"
    log(bb_unc_r) = + bb_rho_r * log(bb_r{-1}) + (1 - bb_rho_r) * [ log(&bb_unc_r) + bb_react ] + bb_shk_r !! bb_pc = bb_pc{-1} * bb_ss_roc_pc;


    "Monetary policy reaction term"
    bb_react = + bb_psi_pc * (log(bb_roc_pc{+1}) - log(bb_ss_roc_pc)) + bb_psi_e * (log(bb_roc_e) - log(&bb_roc_e)) + bb_psi_nh * (log(bb_nh{+1}) - log(&bb_nh)) !! bb_react = 0;


    "Zero floor constraint on policy rate"
    bb_r = bb_floor*max(1, bb_unc_r) + (1-bb_floor)*bb_unc_r;


!variables

    "Government debt interest rate" bb_rg
    "Government consumption" bb_cg
    "Government debt to GDP ratio" bb_dg_to_ngdp
    "Net lump-sum tax on wealthy consumers to consumption ratio" bb_txls1_to_nc
    "Net lump-sum tax on poor consumers to consumption ratio" bb_txls2_to_nc
    "Government consumption, Rate of Change" bb_roc_cg
    "Import tariff rate" bb_trm


!log-variables !all-but

    bb_txls1_to_nc, bb_txls2_to_nc, bb_dg_to_ngdp, bb_trm


!parameters

    "S/S Government debt to GDP ratio" bb_ss_dg_to_ngdp
    "S/S Government consumption to GDP ratio" bb_ss_ncg_to_ngdp
    "S/S General import tariff rate" bb_ss_trm

    "Response in government consumption to government debt" bb_tau_cg
    "Response in type 1 lump-sum tax rate to government debt" bb_tau_txls1
    "Autoregression in government consumption" bb_rho_cg
    "Autoregression in type 1 lump-sum tax rate" bb_rho_txls2
    "Autoregression in type 2 lump-sum tax rate" bb_rho_txls1
    "Autoregression in generate import tariff rate" bb_rho_trm


!shocks

    "Shock to government consumption" bb_shk_cg
    "Shock to type 1 lump-sum taxes" bb_shk_txls1
    "Shock to type 2 lump-sum taxes" bb_shk_txls2
    "Shock to general import tariff rate" bb_shk_trm


!equations

    bb_rg = bb_r;

    
    "Dynamic fiscal budget constraint"
    bb_dg_to_ngdp*bb_ngdp = + bb_rg{-1}*bb_dg_to_ngdp{-1}*bb_ngdp{-1} + bb_pc*bb_cg - (bb_txls1_to_nc + bb_txls2_to_nc) * bb_pc*bb_ch - (bb_pmm - bb_fob_pmm) * bb_mm;


    "Fiscal reaction function for government consumption"
    log(bb_cg) = + bb_rho_cg * log(bb_cg{-1}*&bb_roc_cg) + (1 - bb_rho_cg) * log(bb_ss_ncg_to_ngdp*bb_ngdp/bb_pc) - bb_tau_cg * (bb_dg_to_ngdp{+1} - bb_ss_dg_to_ngdp) + bb_shk_cg !! bb_pc*bb_cg = bb_ss_ncg_to_ngdp*bb_ngdp;


    "Fiscal reaction function for type 1 net lump-sum taxes"
    bb_txls1_to_nc = + bb_rho_txls1 * bb_txls1_to_nc{-1} + (1-bb_rho_txls1) * &bb_txls1_to_nc + bb_tau_txls1 * (bb_dg_to_ngdp{+1} - bb_ss_dg_to_ngdp) + bb_shk_txls1 !! bb_dg_to_ngdp = bb_ss_dg_to_ngdp;


    "Fiscal reaction function for type 2 net lump-sum taxes"
    bb_txls2_to_nc = + bb_rho_txls2*bb_txls2_to_nc{-1} + bb_shk_txls2 !! bb_txls2_to_nc = 0;


    "Fiscal reaction function for import tariffs rate"
    bb_trm = + bb_rho_trm * bb_trm{-1} + (1 - bb_rho_trm) * bb_ss_trm + bb_shk_trm !! bb_trm = bb_ss_trm;


!variables(:bb_open)

    "Non-commodity imports" bb_mm
    "Price of non-commodity imports" bb_pmm
    "Price of non-commodity imports, Free on board at destinatin point" bb_fob_pmm
    "Import content of non-commodity exports" bb_mxx
    "Intermediate import inputs into domestic production" bb_my

    "Domestic content of non-commodity exports" bb_yxx
    "Non-commodity exports" bb_xx
    "Commodity exports" bb_xq
    "Price of non-commodity exports" bb_pxx

    "Net foreign assets to GDP Ratio" bb_nfa_to_ngdp
    "Effective interest rate and valuation on NFA" bb_rnfa
    "Checksum for net foreign assets to GDP ratio" bb_nfa_to_ngdp_checksum
    "Nominal exchange rate" bb_e
    "Expectations of nominal exchange rate" bb_exp_e
    "Nominal Exchange Rate, Rate of Change" bb_roc_e
    "BOP CA corporate equity primary income to GDP ratio" bb_bpceq_to_ngdp
    "BOP FA corporate equity transactions to GDP ratio" bb_bpfeq_to_ngdp
    "Price of non-commodity exports, Reference currency" bb_pxx_rcy
    "Value of non-commodity exports, Reference currency" bb_nxx_rcy
    "Net claims of financial sector on households" bb_bh_to_ngdp
    "Non-commodity imports to GDP ratio" bb_nmm_to_ngdp
    "Non-commodity exports to GDP ratio" bb_nxx_to_ngdp

    "Country credit risk" bb_zh
    "Autonomous component in country credit risk" bb_zh_aut


!log-variables !all-but

    bb_nfa_to_ngdp
    bb_nfa_to_ngdp_checksum
    bb_bpfeq_to_ngdp
    bb_bpceq_to_ngdp
    bb_bh_to_ngdp
    bb_nmm_to_ngdp
    bb_nxx_to_ngdp
    bb_zh_aut


!parameters(:bb_open :bb_steady)

    "Import intensity of non-commodity exports" bb_alpha
    "Acceleration in exportable productivity" bb_gamma_xx
    "Elasticity of household risk function wrt NFA" bb_theta_1
    "Curvature of household risk function wrt NFA" bb_theta_2
    "Share of local commodity production in world commodity production" bb_lambda
    "S/S Autonomous component in country credit risk" bb_ss_zh_aut


!parameters(:bb_open :bb_transition)

    "A/R Autonomous component in country credit risk" bb_rho_zh_aut
    "Weight on model-consistent expectations in exchange rate" bb_zeta_e
    "Adjustment cost parameter in stage t-3 production" bb_xi_y3


!shocks(:bb_open)

    "Interest parity shock" bb_shk_e
    "Shock to country credit risk" bb_shk_zh
    "Shock to autonoumous component in country credit risk" bb_shk_zh_aut


!equations(:bb_open)


    "Distribution of non-commodity imports"
    bb_mm = bb_my + bb_mxx;


    "Commodity endowment"
    bb_xq = bb_lambda * gg_q;

    "Commodity prices in local currency"
    bb_pq = gg_pq * bb_e;


    "Non-commodity export production function"
    bb_xx = bb_ar^bb_gamma_xx * (bb_yxx/(1-bb_alpha))^(1-bb_alpha) * (bb_mxx/bb_alpha)^bb_alpha;

    "Demand for local content in export production"
    (1-bb_alpha) * bb_pxx * bb_xx = bb_py * bb_yxx;

    "Demand for re-exports"
    bb_alpha * bb_pxx * bb_xx = (bb_pmm * gg_dmm) * bb_mxx;


    "Balance of payments transactions"
    bb_nfa_to_ngdp * bb_ngdp = + bb_rnfa * bb_nfa_to_ngdp{-1}*bb_ngdp{-1} + bb_bpfeq_to_ngdp * bb_ngdp + bb_bpceq_to_ngdp * bb_ngdp + bb_pxx * bb_xx - bb_fob_pmm * bb_mm + bb_pq * (bb_xq - bb_mq) + bb_nfa_to_ngdp_checksum * bb_ngdp;

    "Country credit risk"
    bb_zh = + bb_zh_aut + bb_theta_1 * (1/bb_theta_2)*[ exp(-bb_theta_2*bb_nfa_to_ngdp*bb_ngdp/(bb_pk*bb_k)) - 1 ] + bb_shk_zh;

    "Autonomous component in country credit risk"
    bb_zh_aut = + bb_rho_zh_aut * bb_zh_aut{-1} + (1 - bb_rho_zh_aut) * bb_ss_zh_aut + bb_shk_zh_aut !! bb_zh_aut = bb_ss_zh_aut;


    "Net balance sheet of local financial sector"
    bb_bh_to_ngdp + bb_dg_to_ngdp + bb_nfa_to_ngdp = 0;


    "Nominal Exchange Rate Expectations"
    bb_exp_e = bb_e{+1}^bb_zeta_e * (bb_e*&bb_roc_e)^(1-bb_zeta_e);


    bb_roc_e = bb_e / bb_e{-1};


    "Price of non-commodity exports in reference currency"
    bb_pxx_rcy = bb_pxx / bb_e;

    "Value of non-commodity exports in reference currency"
    bb_nxx_rcy = bb_pxx_rcy * bb_xx;


    "Total imports to GDP ratio"
    bb_nmm_to_ngdp = bb_fob_pmm*bb_mm / bb_ngdp;
    bb_nxx_to_ngdp = bb_pxx*bb_xx / bb_ngdp;


!postprocessor

    bb_nmxx_to_ngdp = bb_fob_pmm * bb_mxx / bb_ngdp;
    bb_netxq_to_ngdp = bb_pq*(bb_xq - bb_mq) / bb_ngdp;


!log-variables !all-but

    bb_nmm_to_ngdp
    bb_nxx_to_ngdp
    bb_nmxx_to_ngdp
    bb_netxq_to_ngdp


!variables

    "Total population" cc_nn
    "Total population, Rate of change" cc_roc_nn
    "Total population relative to global population component" cc_nr
    "Working age population" cc_nw
    "Labor force" cc_nf


!log-variables !all-but


!parameters

    "S/S Population, Relative to Global Population Component" cc_ss_nr
    "S/S Share of Working Age Population in Total Population" cc_ss_nw_to_nn
    "S/S Labor Participation Rate" cc_ss_nf_to_nw

    "A/R Total Population Relative to Global Population Component" cc_rho_nr
    "A/R Share of Working Age Population in Total Population" cc_rho_nw
    "A/R Labor Participation Rate" cc_rho_nf


!shocks

    "Shock to relative population component" cc_shk_nr
    "Shock to share of working age population" cc_shk_nw_to_nn
    "Shock to labor participation rate" cc_shk_nf_to_nw


!equations

    "Total population relative to global population component"
    log(cc_nr) = cc_rho_nr * log(cc_nr{-1}) + (1-cc_rho_nr) * log(cc_ss_nr) + cc_shk_nr !! cc_nr = cc_ss_nr;


    "Total population"
    cc_nn = cc_nr * gg_nt;


    "Total population, Rate of change"
    cc_roc_nn = cc_nn / cc_nn{-1} !! cc_roc_nn = gg_ss_roc_nt;


    "Share of working age population"
    cc_nw/cc_nn = + cc_rho_nw * cc_nw{-1}/cc_nn{-1} + (1-cc_rho_nw) * cc_ss_nw_to_nn + cc_shk_nw_to_nn !! cc_nw = cc_ss_nw_to_nn * cc_nn;


    "Labor participation rate"
    cc_nf/cc_nw = + cc_rho_nf * cc_nf{-1}/cc_nw{-1} + (1-cc_rho_nf) * cc_ss_nf_to_nw + cc_shk_nf_to_nw !! cc_nf = cc_ss_nf_to_nw * cc_nw;


!variables(:cc_households)

    "Private consumption" cc_ch
    "Per-capita private consumption" cc_ch_to_nn
    "Relative point of reference for private consumption" cc_ref_ch_to_ch
    "Real discount factor" cc_rdf
    "Per-worker labor supply" cc_nh
    "Private investment" cc_ih
    "Uncertainty discount factor on capital" cc_zk
    "Uncertainty discount factor on production cash flows" cc_zy
    "Ex-post return on capital" cc_rk
    "Production capital" cc_k
    "Production capital services" cc_uk
    "Portfolio of claims on production capital" cc_kk
    "Household net worth" cc_netw
    "Nominal wage rate" cc_w

    "Price of production capital" cc_pk
    "Price of production capital services" cc_pu
    "Real consumer wage rate" cc_w_to_pc
    "Nominal wage rate absent labor market rigidities" cc_ww

    "Nominal wage rate, Rate of change" cc_roc_w
    "Household investment, Rate of change" cc_roc_ih
    "Production capital, Rate of change" cc_roc_k


!log-variables !all-but

    cc_ref_ch_to_ch


!parameters(:cc_households :cc_steady)

    "S/S Uncertainty discount factor on capital" cc_ss_zk
    "S/S Uncertainty discount factor on production cash flows" cc_ss_zy
    "Household discount factor" cc_beta
    "Depreciation of production capital" cc_delta
    "Inverse elasticity of labor supply" cc_eta
    "Utility location parameter of labor supply" cc_eta0
    "Intercept in current wealth utility" cc_nu_0
    "Slope of current wealth utility" cc_nu_1
    "Level parameter in cost of utilization of production capital" cc_upsilon_0
    "Inverse elasticity of cost of utilization of production capital" cc_upsilon_1


!parameters(:cc_households :cc_transitory)

    "A/R in real wage rate" cc_rho_w
    "A/R in uncertainty discount factor on capital" cc_rho_zk
    "A/R in uncertainty discount factor on production cash flows" cc_rho_zy
    "Point of reference in consuptions switch" cc_chi
    "Past consumption in reference consumption parameter" cc_chi_ch
    "Current income in reference consumption parameter" cc_chi_curr
    "Type 1 investment adjustment cost parameter" cc_xi_ih1
    "Type 2 investment adjustment cost parameter" cc_xi_ih2
    "Pressure relief valve for interest rate lower bound" cc_theta_3


!shocks(:cc_households)

    "Shock to private consumption" cc_shk_ch
    "Shock to wage rate" cc_shk_w
    "Shock to current income" cc_shk_curr
    "Shock to uncertainty discount factor on capital" cc_shk_zk
    "Shock to uncertainty discount factor on production cash flows" cc_shk_zy


!equations(:cc_households)


    "Optimal choice of household consumption"
    cc_vh*cc_pc*(cc_ch - cc_chi*cc_ref_ch_to_ch*cc_ch)*exp(-cc_shk_ch) = cc_nn*(1 - cc_chi*&cc_ref_ch_to_ch) !! cc_vh*cc_pc*cc_ch = cc_nn;

    "Point of reference in household consumption" 
    cc_ref_ch_to_ch = [ cc_chi_curr*((cc_w*cc_nh*cc_nf - cc_txls2_to_nc*cc_pc*cc_ch))/cc_pc + cc_chi_ch*cc_ch{-1}*gg_ss_roc_a ] / cc_ch;

    "Optimal choice of net position with local financial sector"
    cc_vh = cc_beta*cc_vh{+1}*cc_rh + cc_nn/(cc_pc*cc_ch)*[ cc_nu_1*(cc_pc*cc_ch/cc_netw - cc_nu_0) - gg_nu ] !! 1 = cc_beta*cc_rh/gg_ss_roc_a/cc_ss_roc_pc + cc_nu_1*cc_nch_to_netw_minus_nu_0 - gg_nu;

    "Auxiliary equation for steady-state calibration of nu_0"
    cc_nch_to_netw_minus_nu_0 = cc_pc * cc_ch / cc_netw - cc_nu_0;

    cc_rdf = cc_beta*cc_vh{+1}*cc_pc{+1}/(cc_vh*cc_pc);

    "Risk adjusted household rate"
    cc_rh = cc_r + cc_theta_3*(cc_unc_r - cc_r) + cc_zh;

    "Current net worth of households"
    cc_netw = cc_kk + cc_dg_to_ngdp*cc_ngdp + cc_nfa_to_ngdp*cc_ngdp;

    "Uncertainty discount factor on capital"
    log(cc_zk) = cc_rho_zk*log(cc_zk{-1}) + (1-cc_rho_zk)*log(cc_ss_zk) + cc_shk_zk !! cc_zk = cc_ss_zk;

    "Uncertainty discount factor on production cash flows"
    log(cc_zy) = cc_rho_zy*log(cc_zy{-1}) + (1-cc_rho_zy)*log(cc_ss_zy) + cc_shk_zy !! cc_zy = cc_ss_zy;


    "Optimal choice of per-worker hours worked"
    cc_vh * cc_ww = cc_eta0 * cc_nh^cc_eta;

    "Real consumer wage rate"
    cc_w_to_pc = cc_w / cc_pc;

    "Real wage rigidities"
    log(cc_w_to_pc) = + cc_rho_w * [log(cc_w_to_pc{-1}) + log(&cc_roc_w/&cc_roc_pc)] + (1-cc_rho_w) * log(cc_ww/cc_pc) + cc_shk_w !! cc_w = cc_ww;


    "Optimal choice of investment in local production capital"
    cc_pk = cc_pih*[ 1 + cc_xi_ih1*(log(cc_ih) - log((&cc_ih/&cc_k*&cc_roc_k)*cc_k{-1})) + cc_xi_ih2*(log(cc_ih/cc_ih{-1}/&cc_roc_ih) - cc_beta*log(cc_ih{+1}/cc_ih/&cc_roc_ih)) ] !! cc_pk = cc_pih;

    "Accumulation of production capital"
    cc_k = (1-cc_delta)*cc_k{-1} + cc_ih;

    "Definition of utilized production capital"
    cc_uk = cc_u * cc_k;

    "Optimal choice of utilization rate of production capital"
    cc_py * cc_upsilon_0 * cc_u^cc_upsilon_1 = cc_pu;

    "Auxiliary equation for steady-state calibration of upsilon_0"
    cc_upsilon_1_py_to_pu = cc_upsilon_0 * cc_py / cc_pu;

    "Ex-post return on capital"
    cc_rk*cc_pk{-1} = cc_u{-1}*cc_pu{-1}*cc_rh{-1} + (1-cc_delta)*cc_pk;


        cc_roc_w = cc_w / cc_w{-1};
    
        cc_roc_ih = cc_ih / cc_ih{-1};
    
        cc_roc_k = cc_k / cc_k{-1};


!variables(:cc_production)

    "Area specific productivity component" cc_ar
    "Shadow value of household budget constraing" cc_vh
    "Price of private consumption" cc_pc
    "Price of private investment" cc_pih
    "Domestic intermediate inputs" cc_yz
    "Stage T-3 output" cc_y3
    "Stage T-2 output" cc_y2
    "Stage T-1 output" cc_y1
    "Stage T-0 output" cc_y
    "Price of stage T-3 output" cc_py3
    "Price of state T-2 output" cc_py2
    "Price of state T-1 output" cc_py1
    "Price of stage T-0 output" cc_py0
    "Price of commodity input into production" cc_pq

    "Commodity input into production" cc_mq
    "Variable labor input into production" cc_nv

    "Nominal GDP" cc_ngdp
    "Real GDP index, Rate of change" cc_roc_gdp
    "Per-capita real GDP index, Rate of change" cc_roc_gdp_to_nn

    "Price of domestic production" cc_py
    "Nominal household rate, LCY" cc_rh

    "Price of final domestic output, Rate of change" cc_roc_py
    "Price of final domestic output, Rate of change, Point of reference" cc_ref_roc_py
    "Price of consumer goods, Rate of change" cc_roc_pc
    "Utilization rate of production capital" cc_u
    "Stage T-3 output, Rate of change" cc_roc_y3
    "Variable labor, Rate of change" cc_roc_nv

    "Auxiliary variable for steady-state calibration of upsilon_0" cc_upsilon_1_py_to_pu
    "Auxiliary equation for steady-state calibration of nu_0" cc_nch_to_netw_minus_nu_0


!log-variables !all-but

    cc_zh, cc_nch_to_netw_minus_nu_0


!parameters(:cc_production :cc_steady)

    "S/S Area specific productivity component" cc_ss_ar

    "Share of overhead labor" cc_gamma_n0
    "Share of intermediate imports in stage T-3 production" cc_gamma_m
    "Share of capital services in stage T-2 production" cc_gamma_uk
    "Share of commodity inputs in stage T-1 production" cc_gamma_q
    "Share of roundabout intermediates in stage T-0 production" cc_gamma_yz

    "Monopoly power (markup) of local producers" cc_mu_py
    "Markup to cover overhead labor" cc_mu_y3


!parameters(:cc_production :cc_transitory)

    "Autoregression in area specific productivity component" cc_rho_ar
    "Weight on S/S inflation in inflation indexation" cc_zeta_py
    "Stage T-2 input factor adjustment cost parameter" cc_xi_y2
    "Stage T-1 input factor adjustment cost parameter" cc_xi_y1
    "Price adjustment cost parameters" cc_xi_py


!shocks(:cc_production)

    "Shock to area specific productivity component" cc_shk_ar
    "Shock to final price setting" cc_shk_py


!equations(:cc_production)


    "Area-specific relative productivity component"
    log(cc_ar) = + cc_rho_ar * log(cc_ar{-1}) + (1 - cc_rho_ar) * log(cc_ss_ar) + cc_shk_ar !! cc_ar = cc_ss_ar;


    "Definition of variable labor input"
    cc_nv = (cc_nh - cc_gamma_n0*&cc_nh) * cc_nf;

    "Stage T-3 production function"
    cc_y3 = (cc_my/cc_gamma_m)^cc_gamma_m * ([cc_ar * gg_a * cc_nv]/(1-cc_gamma_m))^(1-cc_gamma_m);

    "Demand for intermediate imports"
    cc_gamma_m * cc_py3 * cc_y3 = (cc_pmm * gg_dmm) * cc_my * [1 + cc_xi_y3*((log(cc_my/cc_y3)-log(cc_my{-1}/cc_y3{-1}))-&cc_rdf*(log(cc_my{+1}/cc_y3{+1})-log(cc_my/cc_y3)))] !! cc_gamma_m * cc_py3 * cc_y3 = (cc_pmm * gg_dmm) * cc_my;

    "Demand for labor"
    (1-cc_gamma_m) * cc_py3 * cc_y3 = cc_mu_y3 * cc_w * cc_nv * [1 + cc_xi_y3*((log(cc_nv/cc_y3)-log(cc_nv{-1}/cc_y3{-1})-log(&cc_roc_nv/&cc_roc_y3))-&cc_rdf*(log(cc_nv{+1}/cc_y3{+1})-log(cc_nv/cc_y3)-log(&cc_roc_nv/&cc_roc_y3)))] !! (1-cc_gamma_m) * cc_py3 * cc_y3 = cc_mu_y3 * cc_w * cc_nv;


    cc_y2 = (cc_uk/cc_gamma_uk)^cc_gamma_uk * (cc_y3/(1-cc_gamma_uk))^(1-cc_gamma_uk);

    cc_gamma_uk * cc_py2 * cc_y2 = cc_pu * cc_uk * [1 + cc_xi_y2*((log(cc_uk/cc_y2)-log(cc_uk{-1}/cc_y2{-1}))-&cc_rdf*(log(cc_uk{+1}/cc_y2{+1})-log(cc_uk/cc_y2)))] !! cc_gamma_uk * cc_py2 * cc_y2 = cc_pu * cc_uk;

    (1-cc_gamma_uk) * cc_py2 * cc_y2 = cc_py3 * cc_y3 * [1 + cc_xi_y2*((log(cc_y3/cc_y2)-log(cc_y3{-1}/cc_y2{-1}))-&cc_rdf*(log(cc_y3{+1}/cc_y2{+1})-log(cc_y3/cc_y2)))] !! (1-cc_gamma_uk) * cc_py2 * cc_y2 = cc_py3 * cc_y3;


    cc_py1 = cc_py2^(1 - cc_gamma_q) * cc_pq^cc_gamma_q !! cc_y1 = (cc_y2/(1-cc_gamma_q))^(1-cc_gamma_q) * (cc_mq/cc_gamma_q)^cc_gamma_q;


    (1-cc_gamma_q) * &cc_py1 * cc_y1 = &cc_py2 * cc_y2 !! (1-cc_gamma_q) * cc_py1 * cc_y1 = cc_py2 * cc_y2;


    (cc_gamma_q) * &cc_py1 * cc_y1 = &cc_pq * cc_mq !! cc_gamma_q * cc_py1 * cc_y1 = cc_pq * cc_mq;


    cc_y = cc_y1;
    cc_py0 = cc_py1;
    cc_yz = 1;


    cc_mu_py*cc_py0*exp(cc_shk_py) = cc_py*[1 + (cc_mu_py-1)*cc_xi_py*(log(cc_roc_py/cc_ref_roc_py) - cc_beta*gg_zy*cc_zy*log(cc_roc_py{+1}/cc_ref_roc_py{+1}))] !! cc_py = cc_mu_py * cc_py0;

    cc_ref_roc_py = cc_roc_py{-1}^(1-cc_zeta_py) * &cc_roc_py^cc_zeta_py;

    cc_pc = cc_py;
    cc_pih = cc_py;


    cc_y = cc_ch + cc_cg + cc_ih + cc_yxx;


        cc_roc_cg = cc_cg / cc_cg{-1};
    
        cc_roc_pc = cc_pc / cc_pc{-1};
    
        cc_roc_py = cc_py / cc_py{-1};
    
        cc_roc_y3 = cc_y3 / cc_y3{-1};
    
        cc_roc_nv = cc_nv / cc_nv{-1};


    "Per-capita private consumption"
    cc_ch_to_nn = cc_ch / cc_nn;

    "Nominal GDP"
    cc_ngdp = cc_pc*cc_ch + cc_pih*cc_ih + cc_pc*cc_cg + cc_pxx*cc_xx - cc_pmm*cc_mm + cc_pq*(cc_xq - cc_mq);

    "Real GDP index, Rate of change"
    cc_roc_gdp = + (cc_pc*cc_ch/cc_ngdp + cc_pc{-1}*cc_ch{-1}/cc_ngdp{-1})/2 * ((cc_ch)/(cc_ch{-1})) + (cc_pih*cc_ih/cc_ngdp + cc_pih{-1}*cc_ih{-1}/cc_ngdp{-1})/2 * ((cc_ih)/(cc_ih{-1})) + (cc_pc*cc_cg/cc_ngdp + cc_pc{-1}*cc_cg{-1}/cc_ngdp{-1})/2 * ((cc_cg)/(cc_cg{-1})) + (cc_pxx*cc_xx/cc_ngdp + cc_pxx{-1}*cc_xx{-1}/cc_ngdp{-1})/2 * ((cc_xx)/(cc_xx{-1})) - (cc_pmm*cc_mm/cc_ngdp + cc_pmm{-1}*cc_mm{-1}/cc_ngdp{-1})/2 * ((cc_mm)/(cc_mm{-1})) + (cc_pq*cc_xq/cc_ngdp + cc_pq{-1}*cc_xq{-1}/cc_ngdp{-1})/2 * ((cc_xq)/(cc_xq{-1})) - (cc_pq*cc_mq/cc_ngdp + cc_pq{-1}*cc_mq{-1}/cc_ngdp{-1})/2 * ((cc_mq)/(cc_mq{-1})) !! cc_roc_gdp = gg_ss_roc_a * gg_ss_roc_nt;

    "Per-capita real GDP index, Rate of change"
    cc_roc_gdp_to_nn = cc_roc_gdp / cc_roc_nn;


!postprocessor(:cc_production)

    cc_nch_to_ngdp = cc_pc * cc_ch / cc_ngdp;
    cc_nih_to_ngdp = cc_pih * cc_ih / cc_ngdp;
    cc_nkh_to_ngdp = cc_pk * cc_k / cc_ngdp;
    cc_curr_to_ngdp = ((cc_w*cc_nh*cc_nf - cc_txls2_to_nc*cc_pc*cc_ch)) / cc_ngdp;
    cc_gdp = cc_gdp{-1} * cc_roc_gdp;


!log-variables !all-but

    cc_nch_to_ngdp
    cc_nih_to_ngdp
    cc_nkh_to_ngdp
    cc_curr_to_ngdp


!variables(:cc_monetary)

    "Nominal short-term rate, LCY" cc_r
    "Monetary policy reaction term" cc_react
    "Unconstrained nominal short-term rate, LCY" cc_unc_r


!parameters(:cc_monetary :cc_steady)

    "S/S Price of private consumption, Rate of change" cc_ss_roc_pc
    "Switch for lower bound on short-term rate" cc_floor


!parameters(:cc_monetary :cc_transitory)

    "A/R in policy rate" cc_rho_r 
    "Monetary policy reaction to CPI" cc_psi_pc 
    "Monetary policy reaction to nominal exchange rate" cc_psi_e
    "Monetary policy reaction to real economic activity" cc_psi_nh


!shocks(:cc_monetary)

    "Shock to monetary policy reaction function" cc_shk_r


!log-variables !all-but

    cc_react


!equations(:cc_monetary)

    "Monetary policy reaction function"
    log(cc_unc_r) = + cc_rho_r * log(cc_r{-1}) + (1 - cc_rho_r) * [ log(&cc_unc_r) + cc_react ] + cc_shk_r !! cc_pc = cc_pc{-1} * cc_ss_roc_pc;


    "Monetary policy reaction term"
    cc_react = + cc_psi_pc * (log(cc_roc_pc{+1}) - log(cc_ss_roc_pc)) + cc_psi_e * (log(cc_roc_e) - log(&cc_roc_e)) + cc_psi_nh * (log(cc_nh{+1}) - log(&cc_nh)) !! cc_react = 0;


    "Zero floor constraint on policy rate"
    cc_r = cc_floor*max(1, cc_unc_r) + (1-cc_floor)*cc_unc_r;


!variables

    "Government debt interest rate" cc_rg
    "Government consumption" cc_cg
    "Government debt to GDP ratio" cc_dg_to_ngdp
    "Net lump-sum tax on wealthy consumers to consumption ratio" cc_txls1_to_nc
    "Net lump-sum tax on poor consumers to consumption ratio" cc_txls2_to_nc
    "Government consumption, Rate of Change" cc_roc_cg
    "Import tariff rate" cc_trm


!log-variables !all-but

    cc_txls1_to_nc, cc_txls2_to_nc, cc_dg_to_ngdp, cc_trm


!parameters

    "S/S Government debt to GDP ratio" cc_ss_dg_to_ngdp
    "S/S Government consumption to GDP ratio" cc_ss_ncg_to_ngdp
    "S/S General import tariff rate" cc_ss_trm

    "Response in government consumption to government debt" cc_tau_cg
    "Response in type 1 lump-sum tax rate to government debt" cc_tau_txls1
    "Autoregression in government consumption" cc_rho_cg
    "Autoregression in type 1 lump-sum tax rate" cc_rho_txls2
    "Autoregression in type 2 lump-sum tax rate" cc_rho_txls1
    "Autoregression in generate import tariff rate" cc_rho_trm


!shocks

    "Shock to government consumption" cc_shk_cg
    "Shock to type 1 lump-sum taxes" cc_shk_txls1
    "Shock to type 2 lump-sum taxes" cc_shk_txls2
    "Shock to general import tariff rate" cc_shk_trm


!equations

    cc_rg = cc_r;

    
    "Dynamic fiscal budget constraint"
    cc_dg_to_ngdp*cc_ngdp = + cc_rg{-1}*cc_dg_to_ngdp{-1}*cc_ngdp{-1} + cc_pc*cc_cg - (cc_txls1_to_nc + cc_txls2_to_nc) * cc_pc*cc_ch - (cc_pmm - cc_fob_pmm) * cc_mm;


    "Fiscal reaction function for government consumption"
    log(cc_cg) = + cc_rho_cg * log(cc_cg{-1}*&cc_roc_cg) + (1 - cc_rho_cg) * log(cc_ss_ncg_to_ngdp*cc_ngdp/cc_pc) - cc_tau_cg * (cc_dg_to_ngdp{+1} - cc_ss_dg_to_ngdp) + cc_shk_cg !! cc_pc*cc_cg = cc_ss_ncg_to_ngdp*cc_ngdp;


    "Fiscal reaction function for type 1 net lump-sum taxes"
    cc_txls1_to_nc = + cc_rho_txls1 * cc_txls1_to_nc{-1} + (1-cc_rho_txls1) * &cc_txls1_to_nc + cc_tau_txls1 * (cc_dg_to_ngdp{+1} - cc_ss_dg_to_ngdp) + cc_shk_txls1 !! cc_dg_to_ngdp = cc_ss_dg_to_ngdp;


    "Fiscal reaction function for type 2 net lump-sum taxes"
    cc_txls2_to_nc = + cc_rho_txls2*cc_txls2_to_nc{-1} + cc_shk_txls2 !! cc_txls2_to_nc = 0;


    "Fiscal reaction function for import tariffs rate"
    cc_trm = + cc_rho_trm * cc_trm{-1} + (1 - cc_rho_trm) * cc_ss_trm + cc_shk_trm !! cc_trm = cc_ss_trm;


!variables(:cc_open)

    "Non-commodity imports" cc_mm
    "Price of non-commodity imports" cc_pmm
    "Price of non-commodity imports, Free on board at destinatin point" cc_fob_pmm
    "Import content of non-commodity exports" cc_mxx
    "Intermediate import inputs into domestic production" cc_my

    "Domestic content of non-commodity exports" cc_yxx
    "Non-commodity exports" cc_xx
    "Commodity exports" cc_xq
    "Price of non-commodity exports" cc_pxx

    "Net foreign assets to GDP Ratio" cc_nfa_to_ngdp
    "Effective interest rate and valuation on NFA" cc_rnfa
    "Checksum for net foreign assets to GDP ratio" cc_nfa_to_ngdp_checksum
    "Nominal exchange rate" cc_e
    "Expectations of nominal exchange rate" cc_exp_e
    "Nominal Exchange Rate, Rate of Change" cc_roc_e
    "BOP CA corporate equity primary income to GDP ratio" cc_bpceq_to_ngdp
    "BOP FA corporate equity transactions to GDP ratio" cc_bpfeq_to_ngdp
    "Price of non-commodity exports, Reference currency" cc_pxx_rcy
    "Value of non-commodity exports, Reference currency" cc_nxx_rcy
    "Net claims of financial sector on households" cc_bh_to_ngdp
    "Non-commodity imports to GDP ratio" cc_nmm_to_ngdp
    "Non-commodity exports to GDP ratio" cc_nxx_to_ngdp

    "Country credit risk" cc_zh
    "Autonomous component in country credit risk" cc_zh_aut


!log-variables !all-but

    cc_nfa_to_ngdp
    cc_nfa_to_ngdp_checksum
    cc_bpfeq_to_ngdp
    cc_bpceq_to_ngdp
    cc_bh_to_ngdp
    cc_nmm_to_ngdp
    cc_nxx_to_ngdp
    cc_zh_aut


!parameters(:cc_open :cc_steady)

    "Import intensity of non-commodity exports" cc_alpha
    "Acceleration in exportable productivity" cc_gamma_xx
    "Elasticity of household risk function wrt NFA" cc_theta_1
    "Curvature of household risk function wrt NFA" cc_theta_2
    "Share of local commodity production in world commodity production" cc_lambda
    "S/S Autonomous component in country credit risk" cc_ss_zh_aut


!parameters(:cc_open :cc_transition)

    "A/R Autonomous component in country credit risk" cc_rho_zh_aut
    "Weight on model-consistent expectations in exchange rate" cc_zeta_e
    "Adjustment cost parameter in stage t-3 production" cc_xi_y3


!shocks(:cc_open)

    "Interest parity shock" cc_shk_e
    "Shock to country credit risk" cc_shk_zh
    "Shock to autonoumous component in country credit risk" cc_shk_zh_aut


!equations(:cc_open)


    "Distribution of non-commodity imports"
    cc_mm = cc_my + cc_mxx;


    "Commodity endowment"
    cc_xq = cc_lambda * gg_q;

    "Commodity prices in local currency"
    cc_pq = gg_pq * cc_e;


    "Non-commodity export production function"
    cc_xx = cc_ar^cc_gamma_xx * (cc_yxx/(1-cc_alpha))^(1-cc_alpha) * (cc_mxx/cc_alpha)^cc_alpha;

    "Demand for local content in export production"
    (1-cc_alpha) * cc_pxx * cc_xx = cc_py * cc_yxx;

    "Demand for re-exports"
    cc_alpha * cc_pxx * cc_xx = (cc_pmm * gg_dmm) * cc_mxx;


    "Balance of payments transactions"
    cc_nfa_to_ngdp * cc_ngdp = + cc_rnfa * cc_nfa_to_ngdp{-1}*cc_ngdp{-1} + cc_bpfeq_to_ngdp * cc_ngdp + cc_bpceq_to_ngdp * cc_ngdp + cc_pxx * cc_xx - cc_fob_pmm * cc_mm + cc_pq * (cc_xq - cc_mq) + cc_nfa_to_ngdp_checksum * cc_ngdp;

    "Country credit risk"
    cc_zh = + cc_zh_aut + cc_theta_1 * (1/cc_theta_2)*[ exp(-cc_theta_2*cc_nfa_to_ngdp*cc_ngdp/(cc_pk*cc_k)) - 1 ] + cc_shk_zh;

    "Autonomous component in country credit risk"
    cc_zh_aut = + cc_rho_zh_aut * cc_zh_aut{-1} + (1 - cc_rho_zh_aut) * cc_ss_zh_aut + cc_shk_zh_aut !! cc_zh_aut = cc_ss_zh_aut;


    "Net balance sheet of local financial sector"
    cc_bh_to_ngdp + cc_dg_to_ngdp + cc_nfa_to_ngdp = 0;


    "Nominal Exchange Rate Expectations"
    cc_exp_e = cc_e{+1}^cc_zeta_e * (cc_e*&cc_roc_e)^(1-cc_zeta_e);


    cc_roc_e = cc_e / cc_e{-1};


    "Price of non-commodity exports in reference currency"
    cc_pxx_rcy = cc_pxx / cc_e;

    "Value of non-commodity exports in reference currency"
    cc_nxx_rcy = cc_pxx_rcy * cc_xx;


    "Total imports to GDP ratio"
    cc_nmm_to_ngdp = cc_fob_pmm*cc_mm / cc_ngdp;
    cc_nxx_to_ngdp = cc_pxx*cc_xx / cc_ngdp;


!postprocessor

    cc_nmxx_to_ngdp = cc_fob_pmm * cc_mxx / cc_ngdp;
    cc_netxq_to_ngdp = cc_pq*(cc_xq - cc_mq) / cc_ngdp;


!log-variables !all-but

    cc_nmm_to_ngdp
    cc_nxx_to_ngdp
    cc_nmxx_to_ngdp
    cc_netxq_to_ngdp


!variables

    "Total population" dd_nn
    "Total population, Rate of change" dd_roc_nn
    "Total population relative to global population component" dd_nr
    "Working age population" dd_nw
    "Labor force" dd_nf


!log-variables !all-but


!parameters

    "S/S Population, Relative to Global Population Component" dd_ss_nr
    "S/S Share of Working Age Population in Total Population" dd_ss_nw_to_nn
    "S/S Labor Participation Rate" dd_ss_nf_to_nw

    "A/R Total Population Relative to Global Population Component" dd_rho_nr
    "A/R Share of Working Age Population in Total Population" dd_rho_nw
    "A/R Labor Participation Rate" dd_rho_nf


!shocks

    "Shock to relative population component" dd_shk_nr
    "Shock to share of working age population" dd_shk_nw_to_nn
    "Shock to labor participation rate" dd_shk_nf_to_nw


!equations

    "Total population relative to global population component"
    log(dd_nr) = dd_rho_nr * log(dd_nr{-1}) + (1-dd_rho_nr) * log(dd_ss_nr) + dd_shk_nr !! dd_nr = dd_ss_nr;


    "Total population"
    dd_nn = dd_nr * gg_nt;


    "Total population, Rate of change"
    dd_roc_nn = dd_nn / dd_nn{-1} !! dd_roc_nn = gg_ss_roc_nt;


    "Share of working age population"
    dd_nw/dd_nn = + dd_rho_nw * dd_nw{-1}/dd_nn{-1} + (1-dd_rho_nw) * dd_ss_nw_to_nn + dd_shk_nw_to_nn !! dd_nw = dd_ss_nw_to_nn * dd_nn;


    "Labor participation rate"
    dd_nf/dd_nw = + dd_rho_nf * dd_nf{-1}/dd_nw{-1} + (1-dd_rho_nf) * dd_ss_nf_to_nw + dd_shk_nf_to_nw !! dd_nf = dd_ss_nf_to_nw * dd_nw;


!variables(:dd_households)

    "Private consumption" dd_ch
    "Per-capita private consumption" dd_ch_to_nn
    "Relative point of reference for private consumption" dd_ref_ch_to_ch
    "Real discount factor" dd_rdf
    "Per-worker labor supply" dd_nh
    "Private investment" dd_ih
    "Uncertainty discount factor on capital" dd_zk
    "Uncertainty discount factor on production cash flows" dd_zy
    "Ex-post return on capital" dd_rk
    "Production capital" dd_k
    "Production capital services" dd_uk
    "Portfolio of claims on production capital" dd_kk
    "Household net worth" dd_netw
    "Nominal wage rate" dd_w

    "Price of production capital" dd_pk
    "Price of production capital services" dd_pu
    "Real consumer wage rate" dd_w_to_pc
    "Nominal wage rate absent labor market rigidities" dd_ww

    "Nominal wage rate, Rate of change" dd_roc_w
    "Household investment, Rate of change" dd_roc_ih
    "Production capital, Rate of change" dd_roc_k


!log-variables !all-but

    dd_ref_ch_to_ch


!parameters(:dd_households :dd_steady)

    "S/S Uncertainty discount factor on capital" dd_ss_zk
    "S/S Uncertainty discount factor on production cash flows" dd_ss_zy
    "Household discount factor" dd_beta
    "Depreciation of production capital" dd_delta
    "Inverse elasticity of labor supply" dd_eta
    "Utility location parameter of labor supply" dd_eta0
    "Intercept in current wealth utility" dd_nu_0
    "Slope of current wealth utility" dd_nu_1
    "Level parameter in cost of utilization of production capital" dd_upsilon_0
    "Inverse elasticity of cost of utilization of production capital" dd_upsilon_1


!parameters(:dd_households :dd_transitory)

    "A/R in real wage rate" dd_rho_w
    "A/R in uncertainty discount factor on capital" dd_rho_zk
    "A/R in uncertainty discount factor on production cash flows" dd_rho_zy
    "Point of reference in consuptions switch" dd_chi
    "Past consumption in reference consumption parameter" dd_chi_ch
    "Current income in reference consumption parameter" dd_chi_curr
    "Type 1 investment adjustment cost parameter" dd_xi_ih1
    "Type 2 investment adjustment cost parameter" dd_xi_ih2
    "Pressure relief valve for interest rate lower bound" dd_theta_3


!shocks(:dd_households)

    "Shock to private consumption" dd_shk_ch
    "Shock to wage rate" dd_shk_w
    "Shock to current income" dd_shk_curr
    "Shock to uncertainty discount factor on capital" dd_shk_zk
    "Shock to uncertainty discount factor on production cash flows" dd_shk_zy


!equations(:dd_households)


    "Optimal choice of household consumption"
    dd_vh*dd_pc*(dd_ch - dd_chi*dd_ref_ch_to_ch*dd_ch)*exp(-dd_shk_ch) = dd_nn*(1 - dd_chi*&dd_ref_ch_to_ch) !! dd_vh*dd_pc*dd_ch = dd_nn;

    "Point of reference in household consumption" 
    dd_ref_ch_to_ch = [ dd_chi_curr*((dd_w*dd_nh*dd_nf - dd_txls2_to_nc*dd_pc*dd_ch))/dd_pc + dd_chi_ch*dd_ch{-1}*gg_ss_roc_a ] / dd_ch;

    "Optimal choice of net position with local financial sector"
    dd_vh = dd_beta*dd_vh{+1}*dd_rh + dd_nn/(dd_pc*dd_ch)*[ dd_nu_1*(dd_pc*dd_ch/dd_netw - dd_nu_0) - gg_nu ] !! 1 = dd_beta*dd_rh/gg_ss_roc_a/dd_ss_roc_pc + dd_nu_1*dd_nch_to_netw_minus_nu_0 - gg_nu;

    "Auxiliary equation for steady-state calibration of nu_0"
    dd_nch_to_netw_minus_nu_0 = dd_pc * dd_ch / dd_netw - dd_nu_0;

    dd_rdf = dd_beta*dd_vh{+1}*dd_pc{+1}/(dd_vh*dd_pc);

    "Risk adjusted household rate"
    dd_rh = dd_r + dd_theta_3*(dd_unc_r - dd_r) + dd_zh;

    "Current net worth of households"
    dd_netw = dd_kk + dd_dg_to_ngdp*dd_ngdp + dd_nfa_to_ngdp*dd_ngdp;

    "Uncertainty discount factor on capital"
    log(dd_zk) = dd_rho_zk*log(dd_zk{-1}) + (1-dd_rho_zk)*log(dd_ss_zk) + dd_shk_zk !! dd_zk = dd_ss_zk;

    "Uncertainty discount factor on production cash flows"
    log(dd_zy) = dd_rho_zy*log(dd_zy{-1}) + (1-dd_rho_zy)*log(dd_ss_zy) + dd_shk_zy !! dd_zy = dd_ss_zy;


    "Optimal choice of per-worker hours worked"
    dd_vh * dd_ww = dd_eta0 * dd_nh^dd_eta;

    "Real consumer wage rate"
    dd_w_to_pc = dd_w / dd_pc;

    "Real wage rigidities"
    log(dd_w_to_pc) = + dd_rho_w * [log(dd_w_to_pc{-1}) + log(&dd_roc_w/&dd_roc_pc)] + (1-dd_rho_w) * log(dd_ww/dd_pc) + dd_shk_w !! dd_w = dd_ww;


    "Optimal choice of investment in local production capital"
    dd_pk = dd_pih*[ 1 + dd_xi_ih1*(log(dd_ih) - log((&dd_ih/&dd_k*&dd_roc_k)*dd_k{-1})) + dd_xi_ih2*(log(dd_ih/dd_ih{-1}/&dd_roc_ih) - dd_beta*log(dd_ih{+1}/dd_ih/&dd_roc_ih)) ] !! dd_pk = dd_pih;

    "Accumulation of production capital"
    dd_k = (1-dd_delta)*dd_k{-1} + dd_ih;

    "Definition of utilized production capital"
    dd_uk = dd_u * dd_k;

    "Optimal choice of utilization rate of production capital"
    dd_py * dd_upsilon_0 * dd_u^dd_upsilon_1 = dd_pu;

    "Auxiliary equation for steady-state calibration of upsilon_0"
    dd_upsilon_1_py_to_pu = dd_upsilon_0 * dd_py / dd_pu;

    "Ex-post return on capital"
    dd_rk*dd_pk{-1} = dd_u{-1}*dd_pu{-1}*dd_rh{-1} + (1-dd_delta)*dd_pk;


        dd_roc_w = dd_w / dd_w{-1};
    
        dd_roc_ih = dd_ih / dd_ih{-1};
    
        dd_roc_k = dd_k / dd_k{-1};


!variables(:dd_production)

    "Area specific productivity component" dd_ar
    "Shadow value of household budget constraing" dd_vh
    "Price of private consumption" dd_pc
    "Price of private investment" dd_pih
    "Domestic intermediate inputs" dd_yz
    "Stage T-3 output" dd_y3
    "Stage T-2 output" dd_y2
    "Stage T-1 output" dd_y1
    "Stage T-0 output" dd_y
    "Price of stage T-3 output" dd_py3
    "Price of state T-2 output" dd_py2
    "Price of state T-1 output" dd_py1
    "Price of stage T-0 output" dd_py0
    "Price of commodity input into production" dd_pq

    "Commodity input into production" dd_mq
    "Variable labor input into production" dd_nv

    "Nominal GDP" dd_ngdp
    "Real GDP index, Rate of change" dd_roc_gdp
    "Per-capita real GDP index, Rate of change" dd_roc_gdp_to_nn

    "Price of domestic production" dd_py
    "Nominal household rate, LCY" dd_rh

    "Price of final domestic output, Rate of change" dd_roc_py
    "Price of final domestic output, Rate of change, Point of reference" dd_ref_roc_py
    "Price of consumer goods, Rate of change" dd_roc_pc
    "Utilization rate of production capital" dd_u
    "Stage T-3 output, Rate of change" dd_roc_y3
    "Variable labor, Rate of change" dd_roc_nv

    "Auxiliary variable for steady-state calibration of upsilon_0" dd_upsilon_1_py_to_pu
    "Auxiliary equation for steady-state calibration of nu_0" dd_nch_to_netw_minus_nu_0


!log-variables !all-but

    dd_zh, dd_nch_to_netw_minus_nu_0


!parameters(:dd_production :dd_steady)

    "S/S Area specific productivity component" dd_ss_ar

    "Share of overhead labor" dd_gamma_n0
    "Share of intermediate imports in stage T-3 production" dd_gamma_m
    "Share of capital services in stage T-2 production" dd_gamma_uk
    "Share of commodity inputs in stage T-1 production" dd_gamma_q
    "Share of roundabout intermediates in stage T-0 production" dd_gamma_yz

    "Monopoly power (markup) of local producers" dd_mu_py
    "Markup to cover overhead labor" dd_mu_y3


!parameters(:dd_production :dd_transitory)

    "Autoregression in area specific productivity component" dd_rho_ar
    "Weight on S/S inflation in inflation indexation" dd_zeta_py
    "Stage T-2 input factor adjustment cost parameter" dd_xi_y2
    "Stage T-1 input factor adjustment cost parameter" dd_xi_y1
    "Price adjustment cost parameters" dd_xi_py


!shocks(:dd_production)

    "Shock to area specific productivity component" dd_shk_ar
    "Shock to final price setting" dd_shk_py


!equations(:dd_production)


    "Area-specific relative productivity component"
    log(dd_ar) = + dd_rho_ar * log(dd_ar{-1}) + (1 - dd_rho_ar) * log(dd_ss_ar) + dd_shk_ar !! dd_ar = dd_ss_ar;


    "Definition of variable labor input"
    dd_nv = (dd_nh - dd_gamma_n0*&dd_nh) * dd_nf;

    "Stage T-3 production function"
    dd_y3 = (dd_my/dd_gamma_m)^dd_gamma_m * ([dd_ar * gg_a * dd_nv]/(1-dd_gamma_m))^(1-dd_gamma_m);

    "Demand for intermediate imports"
    dd_gamma_m * dd_py3 * dd_y3 = (dd_pmm * gg_dmm) * dd_my * [1 + dd_xi_y3*((log(dd_my/dd_y3)-log(dd_my{-1}/dd_y3{-1}))-&dd_rdf*(log(dd_my{+1}/dd_y3{+1})-log(dd_my/dd_y3)))] !! dd_gamma_m * dd_py3 * dd_y3 = (dd_pmm * gg_dmm) * dd_my;

    "Demand for labor"
    (1-dd_gamma_m) * dd_py3 * dd_y3 = dd_mu_y3 * dd_w * dd_nv * [1 + dd_xi_y3*((log(dd_nv/dd_y3)-log(dd_nv{-1}/dd_y3{-1})-log(&dd_roc_nv/&dd_roc_y3))-&dd_rdf*(log(dd_nv{+1}/dd_y3{+1})-log(dd_nv/dd_y3)-log(&dd_roc_nv/&dd_roc_y3)))] !! (1-dd_gamma_m) * dd_py3 * dd_y3 = dd_mu_y3 * dd_w * dd_nv;


    dd_y2 = (dd_uk/dd_gamma_uk)^dd_gamma_uk * (dd_y3/(1-dd_gamma_uk))^(1-dd_gamma_uk);

    dd_gamma_uk * dd_py2 * dd_y2 = dd_pu * dd_uk * [1 + dd_xi_y2*((log(dd_uk/dd_y2)-log(dd_uk{-1}/dd_y2{-1}))-&dd_rdf*(log(dd_uk{+1}/dd_y2{+1})-log(dd_uk/dd_y2)))] !! dd_gamma_uk * dd_py2 * dd_y2 = dd_pu * dd_uk;

    (1-dd_gamma_uk) * dd_py2 * dd_y2 = dd_py3 * dd_y3 * [1 + dd_xi_y2*((log(dd_y3/dd_y2)-log(dd_y3{-1}/dd_y2{-1}))-&dd_rdf*(log(dd_y3{+1}/dd_y2{+1})-log(dd_y3/dd_y2)))] !! (1-dd_gamma_uk) * dd_py2 * dd_y2 = dd_py3 * dd_y3;


    dd_py1 = dd_py2^(1 - dd_gamma_q) * dd_pq^dd_gamma_q !! dd_y1 = (dd_y2/(1-dd_gamma_q))^(1-dd_gamma_q) * (dd_mq/dd_gamma_q)^dd_gamma_q;


    (1-dd_gamma_q) * &dd_py1 * dd_y1 = &dd_py2 * dd_y2 !! (1-dd_gamma_q) * dd_py1 * dd_y1 = dd_py2 * dd_y2;


    (dd_gamma_q) * &dd_py1 * dd_y1 = &dd_pq * dd_mq !! dd_gamma_q * dd_py1 * dd_y1 = dd_pq * dd_mq;


    dd_y = dd_y1;
    dd_py0 = dd_py1;
    dd_yz = 1;


    dd_mu_py*dd_py0*exp(dd_shk_py) = dd_py*[1 + (dd_mu_py-1)*dd_xi_py*(log(dd_roc_py/dd_ref_roc_py) - dd_beta*gg_zy*dd_zy*log(dd_roc_py{+1}/dd_ref_roc_py{+1}))] !! dd_py = dd_mu_py * dd_py0;

    dd_ref_roc_py = dd_roc_py{-1}^(1-dd_zeta_py) * &dd_roc_py^dd_zeta_py;

    dd_pc = dd_py;
    dd_pih = dd_py;


    dd_y = dd_ch + dd_cg + dd_ih + dd_yxx;


        dd_roc_cg = dd_cg / dd_cg{-1};
    
        dd_roc_pc = dd_pc / dd_pc{-1};
    
        dd_roc_py = dd_py / dd_py{-1};
    
        dd_roc_y3 = dd_y3 / dd_y3{-1};
    
        dd_roc_nv = dd_nv / dd_nv{-1};


    "Per-capita private consumption"
    dd_ch_to_nn = dd_ch / dd_nn;

    "Nominal GDP"
    dd_ngdp = dd_pc*dd_ch + dd_pih*dd_ih + dd_pc*dd_cg + dd_pxx*dd_xx - dd_pmm*dd_mm + dd_pq*(dd_xq - dd_mq);

    "Real GDP index, Rate of change"
    dd_roc_gdp = + (dd_pc*dd_ch/dd_ngdp + dd_pc{-1}*dd_ch{-1}/dd_ngdp{-1})/2 * ((dd_ch)/(dd_ch{-1})) + (dd_pih*dd_ih/dd_ngdp + dd_pih{-1}*dd_ih{-1}/dd_ngdp{-1})/2 * ((dd_ih)/(dd_ih{-1})) + (dd_pc*dd_cg/dd_ngdp + dd_pc{-1}*dd_cg{-1}/dd_ngdp{-1})/2 * ((dd_cg)/(dd_cg{-1})) + (dd_pxx*dd_xx/dd_ngdp + dd_pxx{-1}*dd_xx{-1}/dd_ngdp{-1})/2 * ((dd_xx)/(dd_xx{-1})) - (dd_pmm*dd_mm/dd_ngdp + dd_pmm{-1}*dd_mm{-1}/dd_ngdp{-1})/2 * ((dd_mm)/(dd_mm{-1})) + (dd_pq*dd_xq/dd_ngdp + dd_pq{-1}*dd_xq{-1}/dd_ngdp{-1})/2 * ((dd_xq)/(dd_xq{-1})) - (dd_pq*dd_mq/dd_ngdp + dd_pq{-1}*dd_mq{-1}/dd_ngdp{-1})/2 * ((dd_mq)/(dd_mq{-1})) !! dd_roc_gdp = gg_ss_roc_a * gg_ss_roc_nt;

    "Per-capita real GDP index, Rate of change"
    dd_roc_gdp_to_nn = dd_roc_gdp / dd_roc_nn;


!postprocessor(:dd_production)

    dd_nch_to_ngdp = dd_pc * dd_ch / dd_ngdp;
    dd_nih_to_ngdp = dd_pih * dd_ih / dd_ngdp;
    dd_nkh_to_ngdp = dd_pk * dd_k / dd_ngdp;
    dd_curr_to_ngdp = ((dd_w*dd_nh*dd_nf - dd_txls2_to_nc*dd_pc*dd_ch)) / dd_ngdp;
    dd_gdp = dd_gdp{-1} * dd_roc_gdp;


!log-variables !all-but

    dd_nch_to_ngdp
    dd_nih_to_ngdp
    dd_nkh_to_ngdp
    dd_curr_to_ngdp


!variables(:dd_monetary)

    "Nominal short-term rate, LCY" dd_r
    "Monetary policy reaction term" dd_react
    "Unconstrained nominal short-term rate, LCY" dd_unc_r


!parameters(:dd_monetary :dd_steady)

    "S/S Price of private consumption, Rate of change" dd_ss_roc_pc
    "Switch for lower bound on short-term rate" dd_floor


!parameters(:dd_monetary :dd_transitory)

    "A/R in policy rate" dd_rho_r 
    "Monetary policy reaction to CPI" dd_psi_pc 
    "Monetary policy reaction to nominal exchange rate" dd_psi_e
    "Monetary policy reaction to real economic activity" dd_psi_nh


!shocks(:dd_monetary)

    "Shock to monetary policy reaction function" dd_shk_r


!log-variables !all-but

    dd_react


!equations(:dd_monetary)

    "Monetary policy reaction function"
    log(dd_unc_r) = + dd_rho_r * log(dd_r{-1}) + (1 - dd_rho_r) * [ log(&dd_unc_r) + dd_react ] + dd_shk_r !! dd_pc = dd_pc{-1} * dd_ss_roc_pc;


    "Monetary policy reaction term"
    dd_react = + dd_psi_pc * (log(dd_roc_pc{+1}) - log(dd_ss_roc_pc)) + dd_psi_e * (log(dd_roc_e) - log(&dd_roc_e)) + dd_psi_nh * (log(dd_nh{+1}) - log(&dd_nh)) !! dd_react = 0;


    "Zero floor constraint on policy rate"
    dd_r = dd_floor*max(1, dd_unc_r) + (1-dd_floor)*dd_unc_r;


!variables

    "Government debt interest rate" dd_rg
    "Government consumption" dd_cg
    "Government debt to GDP ratio" dd_dg_to_ngdp
    "Net lump-sum tax on wealthy consumers to consumption ratio" dd_txls1_to_nc
    "Net lump-sum tax on poor consumers to consumption ratio" dd_txls2_to_nc
    "Government consumption, Rate of Change" dd_roc_cg
    "Import tariff rate" dd_trm


!log-variables !all-but

    dd_txls1_to_nc, dd_txls2_to_nc, dd_dg_to_ngdp, dd_trm


!parameters

    "S/S Government debt to GDP ratio" dd_ss_dg_to_ngdp
    "S/S Government consumption to GDP ratio" dd_ss_ncg_to_ngdp
    "S/S General import tariff rate" dd_ss_trm

    "Response in government consumption to government debt" dd_tau_cg
    "Response in type 1 lump-sum tax rate to government debt" dd_tau_txls1
    "Autoregression in government consumption" dd_rho_cg
    "Autoregression in type 1 lump-sum tax rate" dd_rho_txls2
    "Autoregression in type 2 lump-sum tax rate" dd_rho_txls1
    "Autoregression in generate import tariff rate" dd_rho_trm


!shocks

    "Shock to government consumption" dd_shk_cg
    "Shock to type 1 lump-sum taxes" dd_shk_txls1
    "Shock to type 2 lump-sum taxes" dd_shk_txls2
    "Shock to general import tariff rate" dd_shk_trm


!equations

    dd_rg = dd_r;

    
    "Dynamic fiscal budget constraint"
    dd_dg_to_ngdp*dd_ngdp = + dd_rg{-1}*dd_dg_to_ngdp{-1}*dd_ngdp{-1} + dd_pc*dd_cg - (dd_txls1_to_nc + dd_txls2_to_nc) * dd_pc*dd_ch - (dd_pmm - dd_fob_pmm) * dd_mm;


    "Fiscal reaction function for government consumption"
    log(dd_cg) = + dd_rho_cg * log(dd_cg{-1}*&dd_roc_cg) + (1 - dd_rho_cg) * log(dd_ss_ncg_to_ngdp*dd_ngdp/dd_pc) - dd_tau_cg * (dd_dg_to_ngdp{+1} - dd_ss_dg_to_ngdp) + dd_shk_cg !! dd_pc*dd_cg = dd_ss_ncg_to_ngdp*dd_ngdp;


    "Fiscal reaction function for type 1 net lump-sum taxes"
    dd_txls1_to_nc = + dd_rho_txls1 * dd_txls1_to_nc{-1} + (1-dd_rho_txls1) * &dd_txls1_to_nc + dd_tau_txls1 * (dd_dg_to_ngdp{+1} - dd_ss_dg_to_ngdp) + dd_shk_txls1 !! dd_dg_to_ngdp = dd_ss_dg_to_ngdp;


    "Fiscal reaction function for type 2 net lump-sum taxes"
    dd_txls2_to_nc = + dd_rho_txls2*dd_txls2_to_nc{-1} + dd_shk_txls2 !! dd_txls2_to_nc = 0;


    "Fiscal reaction function for import tariffs rate"
    dd_trm = + dd_rho_trm * dd_trm{-1} + (1 - dd_rho_trm) * dd_ss_trm + dd_shk_trm !! dd_trm = dd_ss_trm;


!variables(:dd_open)

    "Non-commodity imports" dd_mm
    "Price of non-commodity imports" dd_pmm
    "Price of non-commodity imports, Free on board at destinatin point" dd_fob_pmm
    "Import content of non-commodity exports" dd_mxx
    "Intermediate import inputs into domestic production" dd_my

    "Domestic content of non-commodity exports" dd_yxx
    "Non-commodity exports" dd_xx
    "Commodity exports" dd_xq
    "Price of non-commodity exports" dd_pxx

    "Net foreign assets to GDP Ratio" dd_nfa_to_ngdp
    "Effective interest rate and valuation on NFA" dd_rnfa
    "Checksum for net foreign assets to GDP ratio" dd_nfa_to_ngdp_checksum
    "Nominal exchange rate" dd_e
    "Expectations of nominal exchange rate" dd_exp_e
    "Nominal Exchange Rate, Rate of Change" dd_roc_e
    "BOP CA corporate equity primary income to GDP ratio" dd_bpceq_to_ngdp
    "BOP FA corporate equity transactions to GDP ratio" dd_bpfeq_to_ngdp
    "Price of non-commodity exports, Reference currency" dd_pxx_rcy
    "Value of non-commodity exports, Reference currency" dd_nxx_rcy
    "Net claims of financial sector on households" dd_bh_to_ngdp
    "Non-commodity imports to GDP ratio" dd_nmm_to_ngdp
    "Non-commodity exports to GDP ratio" dd_nxx_to_ngdp

    "Country credit risk" dd_zh
    "Autonomous component in country credit risk" dd_zh_aut


!log-variables !all-but

    dd_nfa_to_ngdp
    dd_nfa_to_ngdp_checksum
    dd_bpfeq_to_ngdp
    dd_bpceq_to_ngdp
    dd_bh_to_ngdp
    dd_nmm_to_ngdp
    dd_nxx_to_ngdp
    dd_zh_aut


!parameters(:dd_open :dd_steady)

    "Import intensity of non-commodity exports" dd_alpha
    "Acceleration in exportable productivity" dd_gamma_xx
    "Elasticity of household risk function wrt NFA" dd_theta_1
    "Curvature of household risk function wrt NFA" dd_theta_2
    "Share of local commodity production in world commodity production" dd_lambda
    "S/S Autonomous component in country credit risk" dd_ss_zh_aut


!parameters(:dd_open :dd_transition)

    "A/R Autonomous component in country credit risk" dd_rho_zh_aut
    "Weight on model-consistent expectations in exchange rate" dd_zeta_e
    "Adjustment cost parameter in stage t-3 production" dd_xi_y3


!shocks(:dd_open)

    "Interest parity shock" dd_shk_e
    "Shock to country credit risk" dd_shk_zh
    "Shock to autonoumous component in country credit risk" dd_shk_zh_aut


!equations(:dd_open)


    "Distribution of non-commodity imports"
    dd_mm = dd_my + dd_mxx;


    "Commodity endowment"
    dd_xq = dd_lambda * gg_q;

    "Commodity prices in local currency"
    dd_pq = gg_pq * dd_e;


    "Non-commodity export production function"
    dd_xx = dd_ar^dd_gamma_xx * (dd_yxx/(1-dd_alpha))^(1-dd_alpha) * (dd_mxx/dd_alpha)^dd_alpha;

    "Demand for local content in export production"
    (1-dd_alpha) * dd_pxx * dd_xx = dd_py * dd_yxx;

    "Demand for re-exports"
    dd_alpha * dd_pxx * dd_xx = (dd_pmm * gg_dmm) * dd_mxx;


    "Balance of payments transactions"
    dd_nfa_to_ngdp * dd_ngdp = + dd_rnfa * dd_nfa_to_ngdp{-1}*dd_ngdp{-1} + dd_bpfeq_to_ngdp * dd_ngdp + dd_bpceq_to_ngdp * dd_ngdp + dd_pxx * dd_xx - dd_fob_pmm * dd_mm + dd_pq * (dd_xq - dd_mq) + dd_nfa_to_ngdp_checksum * dd_ngdp;

    "Country credit risk"
    dd_zh = + dd_zh_aut + dd_theta_1 * (1/dd_theta_2)*[ exp(-dd_theta_2*dd_nfa_to_ngdp*dd_ngdp/(dd_pk*dd_k)) - 1 ] + dd_shk_zh;

    "Autonomous component in country credit risk"
    dd_zh_aut = + dd_rho_zh_aut * dd_zh_aut{-1} + (1 - dd_rho_zh_aut) * dd_ss_zh_aut + dd_shk_zh_aut !! dd_zh_aut = dd_ss_zh_aut;


    "Net balance sheet of local financial sector"
    dd_bh_to_ngdp + dd_dg_to_ngdp + dd_nfa_to_ngdp = 0;


    "Nominal Exchange Rate Expectations"
    dd_exp_e = dd_e{+1}^dd_zeta_e * (dd_e*&dd_roc_e)^(1-dd_zeta_e);


    dd_roc_e = dd_e / dd_e{-1};


    "Price of non-commodity exports in reference currency"
    dd_pxx_rcy = dd_pxx / dd_e;

    "Value of non-commodity exports in reference currency"
    dd_nxx_rcy = dd_pxx_rcy * dd_xx;


    "Total imports to GDP ratio"
    dd_nmm_to_ngdp = dd_fob_pmm*dd_mm / dd_ngdp;
    dd_nxx_to_ngdp = dd_pxx*dd_xx / dd_ngdp;


!postprocessor

    dd_nmxx_to_ngdp = dd_fob_pmm * dd_mxx / dd_ngdp;
    dd_netxq_to_ngdp = dd_pq*(dd_xq - dd_mq) / dd_ngdp;


!log-variables !all-but

    dd_nmm_to_ngdp
    dd_nxx_to_ngdp
    dd_nmxx_to_ngdp
    dd_netxq_to_ngdp


!variables(:globals)

    "Global productivity trend component" gg_a
    "Global population trend component" gg_nt
    "Global uncertainty discount factor on capital" gg_zk
    "Global uncertainty discount factor on production cash flows" gg_zy
    "Global disruption to non-commodity trade" gg_dmm


!shocks(:globals)

    "Shock to global productivity trend" gg_shk_a
    "Shock to global population trend" gg_shk_nn
    "Shock to global uncertainty discount factor on capital" gg_shk_zk
    "Shock to global uncertainty discount factor on production cash flows" gg_shk_zy
    "Shock to global disruption to non-commodity trade" gg_shk_dmm


!parameters(:globals :steady)

    "S/S Global productivity trend, Rate of change" gg_ss_roc_a
    "S/S Global population trend, Rate of change" gg_ss_roc_nt
    "S/S Global uncertainty discount factor on capital" gg_ss_zk
    "S/S Global uncertainty discount factor on production cash flows" gg_ss_zy
    "S/S Global disruption to non-commodity trade" gg_ss_dmm

    "Global intercept in Euler equation" gg_nu


!parameters(:globals :transitory)

    "A/R in global productivity trend" gg_rho_a
    "A/R in global population trend" gg_rho_nt
    "A/R in uncertainty discount factor on capital" gg_rho_zk
    "A/R in uncertainty discount factor on production cash flows" gg_rho_zy
    "A/R Global disruption to non-commodity trade" gg_rho_dmm


!log-variables !all-but


!equations(:globals)

    "Global productivity trend"
    (log(gg_a)-log(gg_a{-1})) = + gg_rho_a*(log(gg_a{-1})-log(gg_a{-1-1})) + (1-gg_rho_a)*(log(gg_ss_roc_a) + gg_shk_a) !! gg_a = gg_a{-1}*gg_ss_roc_a;


    "Global population trend"
    (log(gg_nt)-log(gg_nt{-1})) = + gg_rho_a * (log(gg_nt{-1})-log(gg_nt{-1-1})) + (1-gg_rho_a) * (log(gg_ss_roc_nt) + gg_shk_nn) !! gg_nt = gg_nt{-1} * gg_ss_roc_nt;


    "Global uncertainty discount factor on capital"
    log(gg_zk) = gg_rho_zk*log(gg_zk{-1}) + (1-gg_rho_zk)*log(gg_ss_zk) + gg_shk_zk !! gg_zk = gg_ss_zk;


    "Global uncertainty discount factor on production cash flows"
    log(gg_zy) = gg_rho_zy*log(gg_zy{-1}) + (1-gg_rho_zy)*log(gg_ss_zy) + gg_shk_zy !! gg_zy = gg_ss_zy;


    "Global disruption to non-commodity trade"
    log(gg_dmm) = + gg_rho_dmm * log(gg_dmm{-1}) + (1 - gg_rho_dmm) * log(gg_ss_dmm) + gg_shk_dmm !! gg_dmm = gg_ss_dmm;


!variables

    "Global population" gg_nn
    "Global population, Rate of change" gg_roc_nn
    "Global index of non-commodity export prices" gg_pxx
    "Global nominal GDP" gg_ngdp
    "Global real GDP index, Rate of change" gg_roc_gdp
    "Global per-capita real GDP index, Rate of change" gg_roc_gdp_to_nn


!equations


    "Net asset clearing"
    0 = + aa_nfa_to_ngdp * aa_ngdp / aa_e + bb_nfa_to_ngdp * bb_ngdp / bb_e + cc_nfa_to_ngdp * cc_ngdp / cc_e + dd_nfa_to_ngdp * dd_ngdp / dd_e ;

    
        "Interest parity"
        bb_r = aa_r * bb_exp_e / bb_e * exp(bb_shk_e);

        "Effective NFA rate"
        bb_rnfa = aa_r{-1} * bb_e / bb_e{-1};

        "NFA checksum"
        bb_nfa_to_ngdp_checksum = 0;
    
        "Interest parity"
        cc_r = aa_r * cc_exp_e / cc_e * exp(cc_shk_e);

        "Effective NFA rate"
        cc_rnfa = aa_r{-1} * cc_e / cc_e{-1};

        "NFA checksum"
        cc_nfa_to_ngdp_checksum = 0;
    
        "Interest parity"
        dd_r = aa_r * dd_exp_e / dd_e * exp(dd_shk_e);

        "Effective NFA rate"
        dd_rnfa = aa_r{-1} * dd_e / dd_e{-1};

        "NFA checksum"
        dd_nfa_to_ngdp_checksum = 0;
    

    "Global reference currency effective NFA rate"
    aa_rnfa = aa_r{-1};

    "Reference currency exchange rate"
    aa_e = 1;

    "Global population"
    gg_nn = + aa_nn + bb_nn + cc_nn + dd_nn ;

    "Global population, rate of change"
    gg_roc_nn = gg_nn / gg_nn{-1};

    "Global index of non-commodity export prices"
    gg_pxx = ( + aa_pxx_rcy * aa_nxx_rcy + bb_pxx_rcy * bb_nxx_rcy + cc_pxx_rcy * cc_nxx_rcy + dd_pxx_rcy * dd_nxx_rcy ) / ( + aa_nxx_rcy + bb_nxx_rcy + cc_nxx_rcy + dd_nxx_rcy ) ;

    "Global demand for commodities"
    gg_q = + aa_mq + bb_mq + cc_mq + dd_mq ;


    "Global nominal GDP"
    gg_ngdp = + aa_ngdp_rcy + bb_ngdp_rcy + cc_ngdp_rcy + dd_ngdp_rcy ;

    "Global real GDP, Rate of change"
    gg_roc_gdp = + (aa_ngdp_rcy/gg_ngdp + aa_ngdp_rcy{-1}/gg_ngdp{-1})/2 * aa_roc_gdp + (bb_ngdp_rcy/gg_ngdp + bb_ngdp_rcy{-1}/gg_ngdp{-1})/2 * bb_roc_gdp + (cc_ngdp_rcy/gg_ngdp + cc_ngdp_rcy{-1}/gg_ngdp{-1})/2 * cc_roc_gdp + (dd_ngdp_rcy/gg_ngdp + dd_ngdp_rcy{-1}/gg_ngdp{-1})/2 * dd_roc_gdp ;

    "Global per-capita real GDP, Rate of change"
    gg_roc_gdp_to_nn = gg_roc_gdp / gg_roc_nn; 


    !variables
        "Nominal GDP, Reference currency" aa_ngdp_rcy
        "Per-capita private consumption" aa_comp_ch_to_nn
        "Per-capita gross production" aa_comp_y_to_nn
    !equations
        aa_ngdp_rcy = aa_ngdp / aa_e;
        aa_comp_ch_to_nn = (aa_ch / aa_nn) / (aa_ch / aa_nn);
        aa_comp_y_to_nn = (aa_y / aa_nn) / (aa_y / aa_nn);

    !variables
        "Nominal GDP, Reference currency" bb_ngdp_rcy
        "Per-capita private consumption" bb_comp_ch_to_nn
        "Per-capita gross production" bb_comp_y_to_nn
    !equations
        bb_ngdp_rcy = bb_ngdp / bb_e;
        bb_comp_ch_to_nn = (bb_ch / bb_nn) / (aa_ch / aa_nn);
        bb_comp_y_to_nn = (bb_y / bb_nn) / (aa_y / aa_nn);

    !variables
        "Nominal GDP, Reference currency" cc_ngdp_rcy
        "Per-capita private consumption" cc_comp_ch_to_nn
        "Per-capita gross production" cc_comp_y_to_nn
    !equations
        cc_ngdp_rcy = cc_ngdp / cc_e;
        cc_comp_ch_to_nn = (cc_ch / cc_nn) / (aa_ch / aa_nn);
        cc_comp_y_to_nn = (cc_y / cc_nn) / (aa_y / aa_nn);

    !variables
        "Nominal GDP, Reference currency" dd_ngdp_rcy
        "Per-capita private consumption" dd_comp_ch_to_nn
        "Per-capita gross production" dd_comp_y_to_nn
    !equations
        dd_ngdp_rcy = dd_ngdp / dd_e;
        dd_comp_ch_to_nn = (dd_ch / dd_nn) / (aa_ch / aa_nn);
        dd_comp_y_to_nn = (dd_y / dd_nn) / (aa_y / aa_nn);


!variables(:commodity)

    "Long-run level of global commodity production" gg_qq
    "Global commodity demand" gg_q
    "Excess demand in global commodity market" gg_qexc
    "Global price of commodities, Reference currency" gg_pq
    "Global real price of commodities" gg_pq_to_pxx


!log-variables !all-but


!parameters(:commodity :transitory)

    "Excess demand elasticity of commodity prices" gg_iota_1
    "A/R Long-run trend in commodity supply" gg_rho_qq


!shocks(:commodity)

    "Shock to long-run trend in global commodity supply" gg_shk_qq
    "Shock to global price of commodities" gg_shk_pq


!equations(:commodity)

    "Long-run level of global commodity production"
    log(gg_qq) = + gg_rho_qq * log(gg_ss_roc_a * gg_ss_roc_nt * gg_qq{-1}) + (1 - gg_rho_qq) * log(gg_a * gg_nn * (&gg_q / &gg_a / &gg_nn)) + gg_shk_qq !! gg_qq = gg_q;

    
    "Log excess demand in commodity market"
    gg_qexc = gg_q / gg_qq !! gg_qexc = 1;


    "Commodity supply curve"
    gg_pq = gg_pxx * gg_qexc^gg_iota_1 * exp(gg_shk_pq) !! gg_pq = gg_pxx;


    "Global real prices of commodities"
    gg_pq_to_pxx = gg_pq / gg_pxx;


!variables
    
        
            "Share of imports from [bb] in total imports to [?]"
            aa_mm_sh_bb
        
            "Share of imports from [cc] in total imports to [?]"
            aa_mm_sh_cc
        
            "Share of imports from [dd] in total imports to [?]"
            aa_mm_sh_dd


            "Share of imports from [aa] in total imports to [?]"
            bb_mm_sh_aa
        
            "Share of imports from [cc] in total imports to [?]"
            bb_mm_sh_cc
        
            "Share of imports from [dd] in total imports to [?]"
            bb_mm_sh_dd


            "Share of imports from [aa] in total imports to [?]"
            cc_mm_sh_aa
        
            "Share of imports from [bb] in total imports to [?]"
            cc_mm_sh_bb
        
            "Share of imports from [dd] in total imports to [?]"
            cc_mm_sh_dd


            "Share of imports from [aa] in total imports to [?]"
            dd_mm_sh_aa
        
            "Share of imports from [bb] in total imports to [?]"
            dd_mm_sh_bb
        
            "Share of imports from [cc] in total imports to [?]"
            dd_mm_sh_cc


!log-variables !all-but


            aa_mm_sh_bb
            aa_trm_bb
        
            aa_mm_sh_cc
            aa_trm_cc
        
            aa_mm_sh_dd
            aa_trm_dd


            bb_mm_sh_aa
            bb_trm_aa
        
            bb_mm_sh_cc
            bb_trm_cc
        
            bb_mm_sh_dd
            bb_trm_dd


            cc_mm_sh_aa
            cc_trm_aa
        
            cc_mm_sh_bb
            cc_trm_bb
        
            cc_mm_sh_dd
            cc_trm_dd


            dd_mm_sh_aa
            dd_trm_aa
        
            dd_mm_sh_bb
            dd_trm_bb
        
            dd_mm_sh_cc
            dd_trm_cc


!parameters

    
        "Point of origination import adjustment costs"
        aa_xi_mm

        
            "Share of imports from [bb] in total [aa] imports"
            aa_omega_bb
        
            "Share of imports from [cc] in total [aa] imports"
            aa_omega_cc
        
            "Share of imports from [dd] in total [aa] imports"
            aa_omega_dd
        
    
        "Point of origination import adjustment costs"
        bb_xi_mm

        
            "Share of imports from [aa] in total [bb] imports"
            bb_omega_aa
        
            "Share of imports from [cc] in total [bb] imports"
            bb_omega_cc
        
            "Share of imports from [dd] in total [bb] imports"
            bb_omega_dd
        
    
        "Point of origination import adjustment costs"
        cc_xi_mm

        
            "Share of imports from [aa] in total [cc] imports"
            cc_omega_aa
        
            "Share of imports from [bb] in total [cc] imports"
            cc_omega_bb
        
            "Share of imports from [dd] in total [cc] imports"
            cc_omega_dd
        
    
        "Point of origination import adjustment costs"
        dd_xi_mm

        
            "Share of imports from [aa] in total [dd] imports"
            dd_omega_aa
        
            "Share of imports from [bb] in total [dd] imports"
            dd_omega_bb
        
            "Share of imports from [cc] in total [dd] imports"
            dd_omega_cc


!equations

    
        "Distribution of exports across areas"
        aa_xx = + bb_mm * bb_mm_sh_aa + cc_mm * cc_mm_sh_aa + dd_mm * dd_mm_sh_aa ;
    
        "Distribution of exports across areas"
        bb_xx = + aa_mm * aa_mm_sh_bb + cc_mm * cc_mm_sh_bb + dd_mm * dd_mm_sh_bb ;
    
        "Distribution of exports across areas"
        cc_xx = + aa_mm * aa_mm_sh_cc + bb_mm * bb_mm_sh_cc + dd_mm * dd_mm_sh_cc ;
    
        "Distribution of exports across areas"
        dd_xx = + aa_mm * aa_mm_sh_dd + bb_mm * bb_mm_sh_dd + cc_mm * cc_mm_sh_dd ;


        "Assembly of total non-commodity imports"
        1 = 1 * (aa_mm_sh_bb / aa_omega_bb)^aa_omega_bb * (aa_mm_sh_cc / aa_omega_cc)^aa_omega_cc * (aa_mm_sh_dd / aa_omega_dd)^aa_omega_dd ;


            "Demand for imports from [bb] in total [aa] non-commodity imports"
            aa_omega_bb * aa_pmm = (aa_e / bb_e) * bb_pxx * (1 + aa_trm + aa_trm_bb) * aa_mm_sh_bb * [1 + aa_xi_mm*(log(aa_mm_sh_bb)-log(aa_mm_sh_bb{-1})) - aa_rdf*(log(aa_mm_sh_bb{+1})-log(aa_mm_sh_bb))] !! aa_omega_bb * aa_pmm = (aa_e / bb_e) * bb_pxx * (1 + aa_trm + aa_trm_bb) * aa_mm_sh_bb;
        
            "Demand for imports from [cc] in total [aa] non-commodity imports"
            aa_omega_cc * aa_pmm = (aa_e / cc_e) * cc_pxx * (1 + aa_trm + aa_trm_cc) * aa_mm_sh_cc * [1 + aa_xi_mm*(log(aa_mm_sh_cc)-log(aa_mm_sh_cc{-1})) - aa_rdf*(log(aa_mm_sh_cc{+1})-log(aa_mm_sh_cc))] !! aa_omega_cc * aa_pmm = (aa_e / cc_e) * cc_pxx * (1 + aa_trm + aa_trm_cc) * aa_mm_sh_cc;
        
            "Demand for imports from [dd] in total [aa] non-commodity imports"
            aa_omega_dd * aa_pmm = (aa_e / dd_e) * dd_pxx * (1 + aa_trm + aa_trm_dd) * aa_mm_sh_dd * [1 + aa_xi_mm*(log(aa_mm_sh_dd)-log(aa_mm_sh_dd{-1})) - aa_rdf*(log(aa_mm_sh_dd{+1})-log(aa_mm_sh_dd))] !! aa_omega_dd * aa_pmm = (aa_e / dd_e) * dd_pxx * (1 + aa_trm + aa_trm_dd) * aa_mm_sh_dd;
        
        aa_fob_pmm = + (aa_e / bb_e) * bb_pxx * aa_mm_sh_bb + (aa_e / cc_e) * cc_pxx * aa_mm_sh_cc + (aa_e / dd_e) * dd_pxx * aa_mm_sh_dd ; 
    
        "Assembly of total non-commodity imports"
        1 = 1 * (bb_mm_sh_aa / bb_omega_aa)^bb_omega_aa * (bb_mm_sh_cc / bb_omega_cc)^bb_omega_cc * (bb_mm_sh_dd / bb_omega_dd)^bb_omega_dd ;


            "Demand for imports from [aa] in total [bb] non-commodity imports"
            bb_omega_aa * bb_pmm = (bb_e / aa_e) * aa_pxx * (1 + bb_trm + bb_trm_aa) * bb_mm_sh_aa * [1 + bb_xi_mm*(log(bb_mm_sh_aa)-log(bb_mm_sh_aa{-1})) - bb_rdf*(log(bb_mm_sh_aa{+1})-log(bb_mm_sh_aa))] !! bb_omega_aa * bb_pmm = (bb_e / aa_e) * aa_pxx * (1 + bb_trm + bb_trm_aa) * bb_mm_sh_aa;
        
            "Demand for imports from [cc] in total [bb] non-commodity imports"
            bb_omega_cc * bb_pmm = (bb_e / cc_e) * cc_pxx * (1 + bb_trm + bb_trm_cc) * bb_mm_sh_cc * [1 + bb_xi_mm*(log(bb_mm_sh_cc)-log(bb_mm_sh_cc{-1})) - bb_rdf*(log(bb_mm_sh_cc{+1})-log(bb_mm_sh_cc))] !! bb_omega_cc * bb_pmm = (bb_e / cc_e) * cc_pxx * (1 + bb_trm + bb_trm_cc) * bb_mm_sh_cc;
        
            "Demand for imports from [dd] in total [bb] non-commodity imports"
            bb_omega_dd * bb_pmm = (bb_e / dd_e) * dd_pxx * (1 + bb_trm + bb_trm_dd) * bb_mm_sh_dd * [1 + bb_xi_mm*(log(bb_mm_sh_dd)-log(bb_mm_sh_dd{-1})) - bb_rdf*(log(bb_mm_sh_dd{+1})-log(bb_mm_sh_dd))] !! bb_omega_dd * bb_pmm = (bb_e / dd_e) * dd_pxx * (1 + bb_trm + bb_trm_dd) * bb_mm_sh_dd;
        
        bb_fob_pmm = + (bb_e / aa_e) * aa_pxx * bb_mm_sh_aa + (bb_e / cc_e) * cc_pxx * bb_mm_sh_cc + (bb_e / dd_e) * dd_pxx * bb_mm_sh_dd ; 
    
        "Assembly of total non-commodity imports"
        1 = 1 * (cc_mm_sh_aa / cc_omega_aa)^cc_omega_aa * (cc_mm_sh_bb / cc_omega_bb)^cc_omega_bb * (cc_mm_sh_dd / cc_omega_dd)^cc_omega_dd ;


            "Demand for imports from [aa] in total [cc] non-commodity imports"
            cc_omega_aa * cc_pmm = (cc_e / aa_e) * aa_pxx * (1 + cc_trm + cc_trm_aa) * cc_mm_sh_aa * [1 + cc_xi_mm*(log(cc_mm_sh_aa)-log(cc_mm_sh_aa{-1})) - cc_rdf*(log(cc_mm_sh_aa{+1})-log(cc_mm_sh_aa))] !! cc_omega_aa * cc_pmm = (cc_e / aa_e) * aa_pxx * (1 + cc_trm + cc_trm_aa) * cc_mm_sh_aa;
        
            "Demand for imports from [bb] in total [cc] non-commodity imports"
            cc_omega_bb * cc_pmm = (cc_e / bb_e) * bb_pxx * (1 + cc_trm + cc_trm_bb) * cc_mm_sh_bb * [1 + cc_xi_mm*(log(cc_mm_sh_bb)-log(cc_mm_sh_bb{-1})) - cc_rdf*(log(cc_mm_sh_bb{+1})-log(cc_mm_sh_bb))] !! cc_omega_bb * cc_pmm = (cc_e / bb_e) * bb_pxx * (1 + cc_trm + cc_trm_bb) * cc_mm_sh_bb;
        
            "Demand for imports from [dd] in total [cc] non-commodity imports"
            cc_omega_dd * cc_pmm = (cc_e / dd_e) * dd_pxx * (1 + cc_trm + cc_trm_dd) * cc_mm_sh_dd * [1 + cc_xi_mm*(log(cc_mm_sh_dd)-log(cc_mm_sh_dd{-1})) - cc_rdf*(log(cc_mm_sh_dd{+1})-log(cc_mm_sh_dd))] !! cc_omega_dd * cc_pmm = (cc_e / dd_e) * dd_pxx * (1 + cc_trm + cc_trm_dd) * cc_mm_sh_dd;
        
        cc_fob_pmm = + (cc_e / aa_e) * aa_pxx * cc_mm_sh_aa + (cc_e / bb_e) * bb_pxx * cc_mm_sh_bb + (cc_e / dd_e) * dd_pxx * cc_mm_sh_dd ; 
    
        "Assembly of total non-commodity imports"
        1 = 1 * (dd_mm_sh_aa / dd_omega_aa)^dd_omega_aa * (dd_mm_sh_bb / dd_omega_bb)^dd_omega_bb * (dd_mm_sh_cc / dd_omega_cc)^dd_omega_cc ;


            "Demand for imports from [aa] in total [dd] non-commodity imports"
            dd_omega_aa * dd_pmm = (dd_e / aa_e) * aa_pxx * (1 + dd_trm + dd_trm_aa) * dd_mm_sh_aa * [1 + dd_xi_mm*(log(dd_mm_sh_aa)-log(dd_mm_sh_aa{-1})) - dd_rdf*(log(dd_mm_sh_aa{+1})-log(dd_mm_sh_aa))] !! dd_omega_aa * dd_pmm = (dd_e / aa_e) * aa_pxx * (1 + dd_trm + dd_trm_aa) * dd_mm_sh_aa;
        
            "Demand for imports from [bb] in total [dd] non-commodity imports"
            dd_omega_bb * dd_pmm = (dd_e / bb_e) * bb_pxx * (1 + dd_trm + dd_trm_bb) * dd_mm_sh_bb * [1 + dd_xi_mm*(log(dd_mm_sh_bb)-log(dd_mm_sh_bb{-1})) - dd_rdf*(log(dd_mm_sh_bb{+1})-log(dd_mm_sh_bb))] !! dd_omega_bb * dd_pmm = (dd_e / bb_e) * bb_pxx * (1 + dd_trm + dd_trm_bb) * dd_mm_sh_bb;
        
            "Demand for imports from [cc] in total [dd] non-commodity imports"
            dd_omega_cc * dd_pmm = (dd_e / cc_e) * cc_pxx * (1 + dd_trm + dd_trm_cc) * dd_mm_sh_cc * [1 + dd_xi_mm*(log(dd_mm_sh_cc)-log(dd_mm_sh_cc{-1})) - dd_rdf*(log(dd_mm_sh_cc{+1})-log(dd_mm_sh_cc))] !! dd_omega_cc * dd_pmm = (dd_e / cc_e) * cc_pxx * (1 + dd_trm + dd_trm_cc) * dd_mm_sh_cc;
        
        dd_fob_pmm = + (dd_e / aa_e) * aa_pxx * dd_mm_sh_aa + (dd_e / bb_e) * bb_pxx * dd_mm_sh_bb + (dd_e / cc_e) * cc_pxx * dd_mm_sh_cc ; 


        !variables
            "Area specific import tariff rate" aa_trm_bb

        !shocks
            "Shock to area specific import tariff rate" aa_shk_trm_bb

        !parameters
            "S/S Area specific import tariff rate" aa_ss_trm_bb
            "S/S Autoregression in area specific import tariff rate" aa_rho_trm_bb

        !equations
            aa_trm_bb = aa_rho_trm_bb * aa_trm_bb{-1} + (1 - aa_rho_trm_bb) * aa_ss_trm_bb + aa_shk_trm_bb !! aa_trm_bb = aa_ss_trm_bb;
    
        !variables
            "Area specific import tariff rate" aa_trm_cc

        !shocks
            "Shock to area specific import tariff rate" aa_shk_trm_cc

        !parameters
            "S/S Area specific import tariff rate" aa_ss_trm_cc
            "S/S Autoregression in area specific import tariff rate" aa_rho_trm_cc

        !equations
            aa_trm_cc = aa_rho_trm_cc * aa_trm_cc{-1} + (1 - aa_rho_trm_cc) * aa_ss_trm_cc + aa_shk_trm_cc !! aa_trm_cc = aa_ss_trm_cc;
    
        !variables
            "Area specific import tariff rate" aa_trm_dd

        !shocks
            "Shock to area specific import tariff rate" aa_shk_trm_dd

        !parameters
            "S/S Area specific import tariff rate" aa_ss_trm_dd
            "S/S Autoregression in area specific import tariff rate" aa_rho_trm_dd

        !equations
            aa_trm_dd = aa_rho_trm_dd * aa_trm_dd{-1} + (1 - aa_rho_trm_dd) * aa_ss_trm_dd + aa_shk_trm_dd !! aa_trm_dd = aa_ss_trm_dd;


        !variables
            "Area specific import tariff rate" bb_trm_aa

        !shocks
            "Shock to area specific import tariff rate" bb_shk_trm_aa

        !parameters
            "S/S Area specific import tariff rate" bb_ss_trm_aa
            "S/S Autoregression in area specific import tariff rate" bb_rho_trm_aa

        !equations
            bb_trm_aa = bb_rho_trm_aa * bb_trm_aa{-1} + (1 - bb_rho_trm_aa) * bb_ss_trm_aa + bb_shk_trm_aa !! bb_trm_aa = bb_ss_trm_aa;
    
        !variables
            "Area specific import tariff rate" bb_trm_cc

        !shocks
            "Shock to area specific import tariff rate" bb_shk_trm_cc

        !parameters
            "S/S Area specific import tariff rate" bb_ss_trm_cc
            "S/S Autoregression in area specific import tariff rate" bb_rho_trm_cc

        !equations
            bb_trm_cc = bb_rho_trm_cc * bb_trm_cc{-1} + (1 - bb_rho_trm_cc) * bb_ss_trm_cc + bb_shk_trm_cc !! bb_trm_cc = bb_ss_trm_cc;
    
        !variables
            "Area specific import tariff rate" bb_trm_dd

        !shocks
            "Shock to area specific import tariff rate" bb_shk_trm_dd

        !parameters
            "S/S Area specific import tariff rate" bb_ss_trm_dd
            "S/S Autoregression in area specific import tariff rate" bb_rho_trm_dd

        !equations
            bb_trm_dd = bb_rho_trm_dd * bb_trm_dd{-1} + (1 - bb_rho_trm_dd) * bb_ss_trm_dd + bb_shk_trm_dd !! bb_trm_dd = bb_ss_trm_dd;


        !variables
            "Area specific import tariff rate" cc_trm_aa

        !shocks
            "Shock to area specific import tariff rate" cc_shk_trm_aa

        !parameters
            "S/S Area specific import tariff rate" cc_ss_trm_aa
            "S/S Autoregression in area specific import tariff rate" cc_rho_trm_aa

        !equations
            cc_trm_aa = cc_rho_trm_aa * cc_trm_aa{-1} + (1 - cc_rho_trm_aa) * cc_ss_trm_aa + cc_shk_trm_aa !! cc_trm_aa = cc_ss_trm_aa;
    
        !variables
            "Area specific import tariff rate" cc_trm_bb

        !shocks
            "Shock to area specific import tariff rate" cc_shk_trm_bb

        !parameters
            "S/S Area specific import tariff rate" cc_ss_trm_bb
            "S/S Autoregression in area specific import tariff rate" cc_rho_trm_bb

        !equations
            cc_trm_bb = cc_rho_trm_bb * cc_trm_bb{-1} + (1 - cc_rho_trm_bb) * cc_ss_trm_bb + cc_shk_trm_bb !! cc_trm_bb = cc_ss_trm_bb;
    
        !variables
            "Area specific import tariff rate" cc_trm_dd

        !shocks
            "Shock to area specific import tariff rate" cc_shk_trm_dd

        !parameters
            "S/S Area specific import tariff rate" cc_ss_trm_dd
            "S/S Autoregression in area specific import tariff rate" cc_rho_trm_dd

        !equations
            cc_trm_dd = cc_rho_trm_dd * cc_trm_dd{-1} + (1 - cc_rho_trm_dd) * cc_ss_trm_dd + cc_shk_trm_dd !! cc_trm_dd = cc_ss_trm_dd;


        !variables
            "Area specific import tariff rate" dd_trm_aa

        !shocks
            "Shock to area specific import tariff rate" dd_shk_trm_aa

        !parameters
            "S/S Area specific import tariff rate" dd_ss_trm_aa
            "S/S Autoregression in area specific import tariff rate" dd_rho_trm_aa

        !equations
            dd_trm_aa = dd_rho_trm_aa * dd_trm_aa{-1} + (1 - dd_rho_trm_aa) * dd_ss_trm_aa + dd_shk_trm_aa !! dd_trm_aa = dd_ss_trm_aa;
    
        !variables
            "Area specific import tariff rate" dd_trm_bb

        !shocks
            "Shock to area specific import tariff rate" dd_shk_trm_bb

        !parameters
            "S/S Area specific import tariff rate" dd_ss_trm_bb
            "S/S Autoregression in area specific import tariff rate" dd_rho_trm_bb

        !equations
            dd_trm_bb = dd_rho_trm_bb * dd_trm_bb{-1} + (1 - dd_rho_trm_bb) * dd_ss_trm_bb + dd_shk_trm_bb !! dd_trm_bb = dd_ss_trm_bb;
    
        !variables
            "Area specific import tariff rate" dd_trm_cc

        !shocks
            "Shock to area specific import tariff rate" dd_shk_trm_cc

        !parameters
            "S/S Area specific import tariff rate" dd_ss_trm_cc
            "S/S Autoregression in area specific import tariff rate" dd_rho_trm_cc

        !equations
            dd_trm_cc = dd_rho_trm_cc * dd_trm_cc{-1} + (1 - dd_rho_trm_cc) * dd_ss_trm_cc + dd_shk_trm_cc !! dd_trm_cc = dd_ss_trm_cc;


!postprocessor


            "Imports from [bb] to [aa]"
            aa_mm_bb = aa_mm_sh_bb * aa_mm;
        
            "Imports from [cc] to [aa]"
            aa_mm_cc = aa_mm_sh_cc * aa_mm;
        
            "Imports from [dd] to [aa]"
            aa_mm_dd = aa_mm_sh_dd * aa_mm;


            "Imports from [aa] to [bb]"
            bb_mm_aa = bb_mm_sh_aa * bb_mm;
        
            "Imports from [cc] to [bb]"
            bb_mm_cc = bb_mm_sh_cc * bb_mm;
        
            "Imports from [dd] to [bb]"
            bb_mm_dd = bb_mm_sh_dd * bb_mm;


            "Imports from [aa] to [cc]"
            cc_mm_aa = cc_mm_sh_aa * cc_mm;
        
            "Imports from [bb] to [cc]"
            cc_mm_bb = cc_mm_sh_bb * cc_mm;
        
            "Imports from [dd] to [cc]"
            cc_mm_dd = cc_mm_sh_dd * cc_mm;


            "Imports from [aa] to [dd]"
            dd_mm_aa = dd_mm_sh_aa * dd_mm;
        
            "Imports from [bb] to [dd]"
            dd_mm_bb = dd_mm_sh_bb * dd_mm;
        
            "Imports from [cc] to [dd]"
            dd_mm_cc = dd_mm_sh_cc * dd_mm;


!log-variables !all-but


!parameters

    
        "Forward capital adjustment cost parameter" aa_xi_k
        
            "Corporate equity portfolio share" aa_phi_aa
        
            "Corporate equity portfolio share" aa_phi_bb
        
            "Corporate equity portfolio share" aa_phi_cc
        
            "Corporate equity portfolio share" aa_phi_dd
        
    
        "Forward capital adjustment cost parameter" bb_xi_k
        
            "Corporate equity portfolio share" bb_phi_aa
        
            "Corporate equity portfolio share" bb_phi_bb
        
            "Corporate equity portfolio share" bb_phi_cc
        
            "Corporate equity portfolio share" bb_phi_dd
        
    
        "Forward capital adjustment cost parameter" cc_xi_k
        
            "Corporate equity portfolio share" cc_phi_aa
        
            "Corporate equity portfolio share" cc_phi_bb
        
            "Corporate equity portfolio share" cc_phi_cc
        
            "Corporate equity portfolio share" cc_phi_dd
        
    
        "Forward capital adjustment cost parameter" dd_xi_k
        
            "Corporate equity portfolio share" dd_phi_aa
        
            "Corporate equity portfolio share" dd_phi_bb
        
            "Corporate equity portfolio share" dd_phi_cc
        
            "Corporate equity portfolio share" dd_phi_dd


!equations

    
        "Average arbitrage-free condition"
        
            + aa_phi_aa * ( - aa_beta * aa_vh{+1} * aa_rh * aa_pk * aa_e / aa_e - aa_vh * aa_xi_k * aa_pk * [ log(aa_k) - log(aa_k{+1}/&aa_roc_k) ] + aa_vh * aa_pu * aa_u * aa_e / aa_e + gg_zk * aa_zk * aa_beta * aa_vh{+1} * (1-aa_delta) * aa_pk{+1} * aa_e{+1} / aa_e{+1} )         
            + bb_phi_aa * ( - bb_beta * bb_vh{+1} * bb_rh * aa_pk * bb_e / aa_e - bb_vh * aa_xi_k * aa_pk * [ log(aa_k) - log(aa_k{+1}/&aa_roc_k) ] + bb_vh * aa_pu * aa_u * bb_e / aa_e + gg_zk * bb_zk * bb_beta * bb_vh{+1} * (1-aa_delta) * aa_pk{+1} * bb_e{+1} / aa_e{+1} )         
            + cc_phi_aa * ( - cc_beta * cc_vh{+1} * cc_rh * aa_pk * cc_e / aa_e - cc_vh * aa_xi_k * aa_pk * [ log(aa_k) - log(aa_k{+1}/&aa_roc_k) ] + cc_vh * aa_pu * aa_u * cc_e / aa_e + gg_zk * cc_zk * cc_beta * cc_vh{+1} * (1-aa_delta) * aa_pk{+1} * cc_e{+1} / aa_e{+1} )         
            + dd_phi_aa * ( - dd_beta * dd_vh{+1} * dd_rh * aa_pk * dd_e / aa_e - dd_vh * aa_xi_k * aa_pk * [ log(aa_k) - log(aa_k{+1}/&aa_roc_k) ] + dd_vh * aa_pu * aa_u * dd_e / aa_e + gg_zk * dd_zk * dd_beta * dd_vh{+1} * (1-aa_delta) * aa_pk{+1} * dd_e{+1} / aa_e{+1} )         
        ;
    
        "Average arbitrage-free condition"
        
            + aa_phi_bb * ( - aa_beta * aa_vh{+1} * aa_rh * bb_pk * aa_e / bb_e - aa_vh * bb_xi_k * bb_pk * [ log(bb_k) - log(bb_k{+1}/&bb_roc_k) ] + aa_vh * bb_pu * bb_u * aa_e / bb_e + gg_zk * aa_zk * aa_beta * aa_vh{+1} * (1-bb_delta) * bb_pk{+1} * aa_e{+1} / bb_e{+1} )         
            + bb_phi_bb * ( - bb_beta * bb_vh{+1} * bb_rh * bb_pk * bb_e / bb_e - bb_vh * bb_xi_k * bb_pk * [ log(bb_k) - log(bb_k{+1}/&bb_roc_k) ] + bb_vh * bb_pu * bb_u * bb_e / bb_e + gg_zk * bb_zk * bb_beta * bb_vh{+1} * (1-bb_delta) * bb_pk{+1} * bb_e{+1} / bb_e{+1} )         
            + cc_phi_bb * ( - cc_beta * cc_vh{+1} * cc_rh * bb_pk * cc_e / bb_e - cc_vh * bb_xi_k * bb_pk * [ log(bb_k) - log(bb_k{+1}/&bb_roc_k) ] + cc_vh * bb_pu * bb_u * cc_e / bb_e + gg_zk * cc_zk * cc_beta * cc_vh{+1} * (1-bb_delta) * bb_pk{+1} * cc_e{+1} / bb_e{+1} )         
            + dd_phi_bb * ( - dd_beta * dd_vh{+1} * dd_rh * bb_pk * dd_e / bb_e - dd_vh * bb_xi_k * bb_pk * [ log(bb_k) - log(bb_k{+1}/&bb_roc_k) ] + dd_vh * bb_pu * bb_u * dd_e / bb_e + gg_zk * dd_zk * dd_beta * dd_vh{+1} * (1-bb_delta) * bb_pk{+1} * dd_e{+1} / bb_e{+1} )         
        ;
    
        "Average arbitrage-free condition"
        
            + aa_phi_cc * ( - aa_beta * aa_vh{+1} * aa_rh * cc_pk * aa_e / cc_e - aa_vh * cc_xi_k * cc_pk * [ log(cc_k) - log(cc_k{+1}/&cc_roc_k) ] + aa_vh * cc_pu * cc_u * aa_e / cc_e + gg_zk * aa_zk * aa_beta * aa_vh{+1} * (1-cc_delta) * cc_pk{+1} * aa_e{+1} / cc_e{+1} )         
            + bb_phi_cc * ( - bb_beta * bb_vh{+1} * bb_rh * cc_pk * bb_e / cc_e - bb_vh * cc_xi_k * cc_pk * [ log(cc_k) - log(cc_k{+1}/&cc_roc_k) ] + bb_vh * cc_pu * cc_u * bb_e / cc_e + gg_zk * bb_zk * bb_beta * bb_vh{+1} * (1-cc_delta) * cc_pk{+1} * bb_e{+1} / cc_e{+1} )         
            + cc_phi_cc * ( - cc_beta * cc_vh{+1} * cc_rh * cc_pk * cc_e / cc_e - cc_vh * cc_xi_k * cc_pk * [ log(cc_k) - log(cc_k{+1}/&cc_roc_k) ] + cc_vh * cc_pu * cc_u * cc_e / cc_e + gg_zk * cc_zk * cc_beta * cc_vh{+1} * (1-cc_delta) * cc_pk{+1} * cc_e{+1} / cc_e{+1} )         
            + dd_phi_cc * ( - dd_beta * dd_vh{+1} * dd_rh * cc_pk * dd_e / cc_e - dd_vh * cc_xi_k * cc_pk * [ log(cc_k) - log(cc_k{+1}/&cc_roc_k) ] + dd_vh * cc_pu * cc_u * dd_e / cc_e + gg_zk * dd_zk * dd_beta * dd_vh{+1} * (1-cc_delta) * cc_pk{+1} * dd_e{+1} / cc_e{+1} )         
        ;
    
        "Average arbitrage-free condition"
        
            + aa_phi_dd * ( - aa_beta * aa_vh{+1} * aa_rh * dd_pk * aa_e / dd_e - aa_vh * dd_xi_k * dd_pk * [ log(dd_k) - log(dd_k{+1}/&dd_roc_k) ] + aa_vh * dd_pu * dd_u * aa_e / dd_e + gg_zk * aa_zk * aa_beta * aa_vh{+1} * (1-dd_delta) * dd_pk{+1} * aa_e{+1} / dd_e{+1} )         
            + bb_phi_dd * ( - bb_beta * bb_vh{+1} * bb_rh * dd_pk * bb_e / dd_e - bb_vh * dd_xi_k * dd_pk * [ log(dd_k) - log(dd_k{+1}/&dd_roc_k) ] + bb_vh * dd_pu * dd_u * bb_e / dd_e + gg_zk * bb_zk * bb_beta * bb_vh{+1} * (1-dd_delta) * dd_pk{+1} * bb_e{+1} / dd_e{+1} )         
            + cc_phi_dd * ( - cc_beta * cc_vh{+1} * cc_rh * dd_pk * cc_e / dd_e - cc_vh * dd_xi_k * dd_pk * [ log(dd_k) - log(dd_k{+1}/&dd_roc_k) ] + cc_vh * dd_pu * dd_u * cc_e / dd_e + gg_zk * cc_zk * cc_beta * cc_vh{+1} * (1-dd_delta) * dd_pk{+1} * cc_e{+1} / dd_e{+1} )         
            + dd_phi_dd * ( - dd_beta * dd_vh{+1} * dd_rh * dd_pk * dd_e / dd_e - dd_vh * dd_xi_k * dd_pk * [ log(dd_k) - log(dd_k{+1}/&dd_roc_k) ] + dd_vh * dd_pu * dd_u * dd_e / dd_e + gg_zk * dd_zk * dd_beta * dd_vh{+1} * (1-dd_delta) * dd_pk{+1} * dd_e{+1} / dd_e{+1} )         
        ;


        "BOP FA corporate equity transactions to GDP ratio"
        aa_bpfeq_to_ngdp * aa_ngdp =         
            + aa_phi_aa * aa_e / aa_e * ( + (1 - aa_delta) * aa_pk * aa_k{-1} - aa_pk * aa_k ) - aa_phi_aa * ( + (1 - aa_delta) * aa_pk * aa_k{-1} - aa_pk * aa_k )         
            + aa_phi_bb * aa_e / bb_e * ( + (1 - bb_delta) * bb_pk * bb_k{-1} - bb_pk * bb_k ) - bb_phi_aa * ( + (1 - aa_delta) * aa_pk * aa_k{-1} - aa_pk * aa_k )         
            + aa_phi_cc * aa_e / cc_e * ( + (1 - cc_delta) * cc_pk * cc_k{-1} - cc_pk * cc_k ) - cc_phi_aa * ( + (1 - aa_delta) * aa_pk * aa_k{-1} - aa_pk * aa_k )         
            + aa_phi_dd * aa_e / dd_e * ( + (1 - dd_delta) * dd_pk * dd_k{-1} - dd_pk * dd_k ) - dd_phi_aa * ( + (1 - aa_delta) * aa_pk * aa_k{-1} - aa_pk * aa_k )         
        ;

        "BOP CA corporate equity primary income to GDP ratio"
        aa_bpceq_to_ngdp * aa_ngdp =         
            + aa_phi_aa * aa_e / aa_e * ( + aa_pu * aa_uk ) - aa_phi_aa * ( + aa_pu * aa_uk )         
            + aa_phi_bb * aa_e / bb_e * ( + bb_pu * bb_uk ) - bb_phi_aa * ( + aa_pu * aa_uk )         
            + aa_phi_cc * aa_e / cc_e * ( + cc_pu * cc_uk ) - cc_phi_aa * ( + aa_pu * aa_uk )         
            + aa_phi_dd * aa_e / dd_e * ( + dd_pu * dd_uk ) - dd_phi_aa * ( + aa_pu * aa_uk )         
        ;
    
        "BOP FA corporate equity transactions to GDP ratio"
        bb_bpfeq_to_ngdp * bb_ngdp =         
            + bb_phi_aa * bb_e / aa_e * ( + (1 - aa_delta) * aa_pk * aa_k{-1} - aa_pk * aa_k ) - aa_phi_bb * ( + (1 - bb_delta) * bb_pk * bb_k{-1} - bb_pk * bb_k )         
            + bb_phi_bb * bb_e / bb_e * ( + (1 - bb_delta) * bb_pk * bb_k{-1} - bb_pk * bb_k ) - bb_phi_bb * ( + (1 - bb_delta) * bb_pk * bb_k{-1} - bb_pk * bb_k )         
            + bb_phi_cc * bb_e / cc_e * ( + (1 - cc_delta) * cc_pk * cc_k{-1} - cc_pk * cc_k ) - cc_phi_bb * ( + (1 - bb_delta) * bb_pk * bb_k{-1} - bb_pk * bb_k )         
            + bb_phi_dd * bb_e / dd_e * ( + (1 - dd_delta) * dd_pk * dd_k{-1} - dd_pk * dd_k ) - dd_phi_bb * ( + (1 - bb_delta) * bb_pk * bb_k{-1} - bb_pk * bb_k )         
        ;

        "BOP CA corporate equity primary income to GDP ratio"
        bb_bpceq_to_ngdp * bb_ngdp =         
            + bb_phi_aa * bb_e / aa_e * ( + aa_pu * aa_uk ) - aa_phi_bb * ( + bb_pu * bb_uk )         
            + bb_phi_bb * bb_e / bb_e * ( + bb_pu * bb_uk ) - bb_phi_bb * ( + bb_pu * bb_uk )         
            + bb_phi_cc * bb_e / cc_e * ( + cc_pu * cc_uk ) - cc_phi_bb * ( + bb_pu * bb_uk )         
            + bb_phi_dd * bb_e / dd_e * ( + dd_pu * dd_uk ) - dd_phi_bb * ( + bb_pu * bb_uk )         
        ;
    
        "BOP FA corporate equity transactions to GDP ratio"
        cc_bpfeq_to_ngdp * cc_ngdp =         
            + cc_phi_aa * cc_e / aa_e * ( + (1 - aa_delta) * aa_pk * aa_k{-1} - aa_pk * aa_k ) - aa_phi_cc * ( + (1 - cc_delta) * cc_pk * cc_k{-1} - cc_pk * cc_k )         
            + cc_phi_bb * cc_e / bb_e * ( + (1 - bb_delta) * bb_pk * bb_k{-1} - bb_pk * bb_k ) - bb_phi_cc * ( + (1 - cc_delta) * cc_pk * cc_k{-1} - cc_pk * cc_k )         
            + cc_phi_cc * cc_e / cc_e * ( + (1 - cc_delta) * cc_pk * cc_k{-1} - cc_pk * cc_k ) - cc_phi_cc * ( + (1 - cc_delta) * cc_pk * cc_k{-1} - cc_pk * cc_k )         
            + cc_phi_dd * cc_e / dd_e * ( + (1 - dd_delta) * dd_pk * dd_k{-1} - dd_pk * dd_k ) - dd_phi_cc * ( + (1 - cc_delta) * cc_pk * cc_k{-1} - cc_pk * cc_k )         
        ;

        "BOP CA corporate equity primary income to GDP ratio"
        cc_bpceq_to_ngdp * cc_ngdp =         
            + cc_phi_aa * cc_e / aa_e * ( + aa_pu * aa_uk ) - aa_phi_cc * ( + cc_pu * cc_uk )         
            + cc_phi_bb * cc_e / bb_e * ( + bb_pu * bb_uk ) - bb_phi_cc * ( + cc_pu * cc_uk )         
            + cc_phi_cc * cc_e / cc_e * ( + cc_pu * cc_uk ) - cc_phi_cc * ( + cc_pu * cc_uk )         
            + cc_phi_dd * cc_e / dd_e * ( + dd_pu * dd_uk ) - dd_phi_cc * ( + cc_pu * cc_uk )         
        ;
    
        "BOP FA corporate equity transactions to GDP ratio"
        dd_bpfeq_to_ngdp * dd_ngdp =         
            + dd_phi_aa * dd_e / aa_e * ( + (1 - aa_delta) * aa_pk * aa_k{-1} - aa_pk * aa_k ) - aa_phi_dd * ( + (1 - dd_delta) * dd_pk * dd_k{-1} - dd_pk * dd_k )         
            + dd_phi_bb * dd_e / bb_e * ( + (1 - bb_delta) * bb_pk * bb_k{-1} - bb_pk * bb_k ) - bb_phi_dd * ( + (1 - dd_delta) * dd_pk * dd_k{-1} - dd_pk * dd_k )         
            + dd_phi_cc * dd_e / cc_e * ( + (1 - cc_delta) * cc_pk * cc_k{-1} - cc_pk * cc_k ) - cc_phi_dd * ( + (1 - dd_delta) * dd_pk * dd_k{-1} - dd_pk * dd_k )         
            + dd_phi_dd * dd_e / dd_e * ( + (1 - dd_delta) * dd_pk * dd_k{-1} - dd_pk * dd_k ) - dd_phi_dd * ( + (1 - dd_delta) * dd_pk * dd_k{-1} - dd_pk * dd_k )         
        ;

        "BOP CA corporate equity primary income to GDP ratio"
        dd_bpceq_to_ngdp * dd_ngdp =         
            + dd_phi_aa * dd_e / aa_e * ( + aa_pu * aa_uk ) - aa_phi_dd * ( + dd_pu * dd_uk )         
            + dd_phi_bb * dd_e / bb_e * ( + bb_pu * bb_uk ) - bb_phi_dd * ( + dd_pu * dd_uk )         
            + dd_phi_cc * dd_e / cc_e * ( + cc_pu * cc_uk ) - cc_phi_dd * ( + dd_pu * dd_uk )         
            + dd_phi_dd * dd_e / dd_e * ( + dd_pu * dd_uk ) - dd_phi_dd * ( + dd_pu * dd_uk )         
        ;


        "Value of corporate equity portfolio"
        aa_kk = + aa_phi_aa * aa_e / aa_e * (aa_pk * aa_k) + aa_phi_bb * aa_e / bb_e * (bb_pk * bb_k) + aa_phi_cc * aa_e / cc_e * (cc_pk * cc_k) + aa_phi_dd * aa_e / dd_e * (dd_pk * dd_k) ;
    
        "Value of corporate equity portfolio"
        bb_kk = + bb_phi_aa * bb_e / aa_e * (aa_pk * aa_k) + bb_phi_bb * bb_e / bb_e * (bb_pk * bb_k) + bb_phi_cc * bb_e / cc_e * (cc_pk * cc_k) + bb_phi_dd * bb_e / dd_e * (dd_pk * dd_k) ;
    
        "Value of corporate equity portfolio"
        cc_kk = + cc_phi_aa * cc_e / aa_e * (aa_pk * aa_k) + cc_phi_bb * cc_e / bb_e * (bb_pk * bb_k) + cc_phi_cc * cc_e / cc_e * (cc_pk * cc_k) + cc_phi_dd * cc_e / dd_e * (dd_pk * dd_k) ;
    
        "Value of corporate equity portfolio"
        dd_kk = + dd_phi_aa * dd_e / aa_e * (aa_pk * aa_k) + dd_phi_bb * dd_e / bb_e * (bb_pk * bb_k) + dd_phi_cc * dd_e / cc_e * (cc_pk * cc_k) + dd_phi_dd * dd_e / dd_e * (dd_pk * dd_k) ;
